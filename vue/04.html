<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue单元测试 | MrXiong</title>
    <meta name="description" content="熊刚的个人博客首页，熊刚的技术作品，熊刚的生活成长">
    <link rel="icon" href="/myBlog/favicon.ico">
  <link rel="manifest" href="/myBlog/manifest.json">
    
    <link rel="preload" href="/myBlog/assets/css/0.styles.67215e50.css" as="style"><link rel="preload" href="/myBlog/assets/js/app.9a205e1a.js" as="script"><link rel="preload" href="/myBlog/assets/js/2.c03f67b8.js" as="script"><link rel="preload" href="/myBlog/assets/js/35.ecaae5f1.js" as="script"><link rel="prefetch" href="/myBlog/assets/js/10.1772eaaa.js"><link rel="prefetch" href="/myBlog/assets/js/11.b72fb48b.js"><link rel="prefetch" href="/myBlog/assets/js/12.c2a1f8a6.js"><link rel="prefetch" href="/myBlog/assets/js/13.8288193b.js"><link rel="prefetch" href="/myBlog/assets/js/14.952ed0f9.js"><link rel="prefetch" href="/myBlog/assets/js/15.c67c2b45.js"><link rel="prefetch" href="/myBlog/assets/js/16.e7bdeb4f.js"><link rel="prefetch" href="/myBlog/assets/js/17.775b6b87.js"><link rel="prefetch" href="/myBlog/assets/js/18.3eb29a8e.js"><link rel="prefetch" href="/myBlog/assets/js/19.21de1f76.js"><link rel="prefetch" href="/myBlog/assets/js/20.94867820.js"><link rel="prefetch" href="/myBlog/assets/js/21.6daa352d.js"><link rel="prefetch" href="/myBlog/assets/js/22.5e365889.js"><link rel="prefetch" href="/myBlog/assets/js/23.b11b9f1d.js"><link rel="prefetch" href="/myBlog/assets/js/24.b5e770f4.js"><link rel="prefetch" href="/myBlog/assets/js/25.0d01a527.js"><link rel="prefetch" href="/myBlog/assets/js/26.cb940bf6.js"><link rel="prefetch" href="/myBlog/assets/js/27.ed621a85.js"><link rel="prefetch" href="/myBlog/assets/js/28.bcdc172f.js"><link rel="prefetch" href="/myBlog/assets/js/29.da4d0bf3.js"><link rel="prefetch" href="/myBlog/assets/js/3.0f742e16.js"><link rel="prefetch" href="/myBlog/assets/js/30.bbf7f9de.js"><link rel="prefetch" href="/myBlog/assets/js/31.f84eb563.js"><link rel="prefetch" href="/myBlog/assets/js/32.485bc394.js"><link rel="prefetch" href="/myBlog/assets/js/33.69f4ac61.js"><link rel="prefetch" href="/myBlog/assets/js/34.929ce270.js"><link rel="prefetch" href="/myBlog/assets/js/36.fb388a85.js"><link rel="prefetch" href="/myBlog/assets/js/37.b0fc1645.js"><link rel="prefetch" href="/myBlog/assets/js/38.22c84c1e.js"><link rel="prefetch" href="/myBlog/assets/js/4.6c9ad4a3.js"><link rel="prefetch" href="/myBlog/assets/js/5.be02b664.js"><link rel="prefetch" href="/myBlog/assets/js/6.99df0c05.js"><link rel="prefetch" href="/myBlog/assets/js/7.872b75e5.js"><link rel="prefetch" href="/myBlog/assets/js/8.997b8e74.js"><link rel="prefetch" href="/myBlog/assets/js/9.3fefe930.js">
    <link rel="stylesheet" href="/myBlog/assets/css/0.styles.67215e50.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myBlog/" class="home-link router-link-active"><!----> <span class="site-name">MrXiong</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myBlog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myBlog/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/myBlog/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/myBlog/vue/" class="nav-link router-link-active">Vue</a></li><li class="dropdown-item"><!----> <a href="/myBlog/es6/" class="nav-link">ES6</a></li></ul></div></div><div class="nav-item"><a href="/myBlog/node/" class="nav-link">后端及实用技术</a></div><div class="nav-item"><a href="/myBlog/social/" class="nav-link">社交媒体</a></div><div class="nav-item"><a href="/myBlog/about/" class="nav-link">生活与创作</a></div> <a href="https://github.com/gangking/myBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/myBlog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myBlog/webpack/" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/myBlog/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/myBlog/vue/" class="nav-link router-link-active">Vue</a></li><li class="dropdown-item"><!----> <a href="/myBlog/es6/" class="nav-link">ES6</a></li></ul></div></div><div class="nav-item"><a href="/myBlog/node/" class="nav-link">后端及实用技术</a></div><div class="nav-item"><a href="/myBlog/social/" class="nav-link">社交媒体</a></div><div class="nav-item"><a href="/myBlog/about/" class="nav-link">生活与创作</a></div> <a href="https://github.com/gangking/myBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myBlog/vue/" class="sidebar-link">介绍</a></li><li><a href="/myBlog/vue/01.html" class="sidebar-link">3.0开发项目</a></li><li><a href="/myBlog/vue/02.html" class="sidebar-link">项目开发心得</a></li><li><a href="/myBlog/vue/03.html" class="sidebar-link">Vue源码</a></li><li><a href="/myBlog/vue/04.html" class="active sidebar-link">Vue单元测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#为什么要测试？" class="sidebar-link">为什么要测试？</a></li><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#vue怎么测试？" class="sidebar-link">vue怎么测试？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#端到端的测试（e2e）" class="sidebar-link">端到端的测试（E2E）</a></li><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#单元测试（unit-test）" class="sidebar-link">单元测试（Unit Test）</a></li></ul></li><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#karma" class="sidebar-link">Karma</a></li><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#mocha" class="sidebar-link">Mocha</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#断言库" class="sidebar-link">断言库</a></li><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#chai的基本使用" class="sidebar-link">Chai的基本使用</a></li><li class="sidebar-sub-header"><a href="/myBlog/vue/04.html#使用测试步骤（一）" class="sidebar-link">使用测试步骤（一）</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue单元测试"><a href="#vue单元测试" aria-hidden="true" class="header-anchor">#</a> vue单元测试</h1> <h2 id="为什么要测试？"><a href="#为什么要测试？" aria-hidden="true" class="header-anchor">#</a> 为什么要测试？</h2> <p>​	测试是完善研发体系中不可或缺的一环。前端同样需要测试，你的css改动可能导致页面错位、js改动可能导致功能不正常。尽管测试领域工具层出不穷，在前端的自动化测试上面却实施并不广泛，但是前端偏向界面所以还是有很多人依旧以手工测试为主。</p> <p>​	虽然很多公司有自己的测试部门，而且前端开发大多不涉及测试环节，但鉴于目前前端领域的快速发展，其涉及面越来越广，前端开发者们必然不能止步于目前状态。我认为学好前端测试，不仅仅有利于自己整理需求、检查代码，更是一个优秀开发者的体现。</p> <div class="language- extra-class"><pre class="language-text"><code>黑盒测试：立足于界面功能测试，不涉及源码。
</code></pre></div><h2 id="vue怎么测试？"><a href="#vue怎么测试？" aria-hidden="true" class="header-anchor">#</a> vue怎么测试？</h2> <p>​	下面采用的是Vue官方工具(Vue-Cli)搭建出来的项目，在这个搭建工具中推荐的两种测试分别是<strong>端到端的测试（E2E）和单元测试（Unit Test）</strong>。</p> <h3 id="端到端的测试（e2e）"><a href="#端到端的测试（e2e）" aria-hidden="true" class="header-anchor">#</a> 端到端的测试（E2E）</h3> <p>​	E2E或者端到端（End-To-End）或者UI测试是一种测试方法，它用来测试一个应用从头到尾的流程是否和设计的时候所想的一样。简而言之，它从一个用户的角度出发，认为整个系统都是一个黑箱，只有UI会暴露给用户。</p> <h3 id="单元测试（unit-test）"><a href="#单元测试（unit-test）" aria-hidden="true" class="header-anchor">#</a> 单元测试（Unit Test）</h3> <p>​	测试驱动开发，单元测试就不陌生。单元测试是用来对一个模块、一个函数或者一个类来进行正确性检验的测试工作。比如写个加法函数add(a,b){return a+b}，我们可以编写以下几个测试用例：</p> <ul><li><p>输入1和1，期待返回结果是2；</p></li> <li><p>输入非数值类型，比如None,[],{}，期待抛出异常；</p></li></ul> <p>​	把上面的测试用例放在一个测试模块里，就是一个完整的单元测试。</p> <p>​	如果单元测试通过，说明我们测试的这个函数能够正常工作。如果单元测试不通过，要么函数有bug，要么测试条件输入不正确,总之，需要修复使单元测试能够通过。</p> <p>​	那在vue中的单元测试中主要使用两个工具分别是(Karma+Mocha)</p> <h2 id="karma"><a href="#karma" aria-hidden="true" class="header-anchor">#</a> Karma</h2> <p>​	基于Node.js的javascript测试执行过程管理工具(Test Runner)。该工具在Vue中主要作用是将项目运行在各种主流Web浏览器进行测试。</p> <p>​	换句话说，他是一个测试工具，能让你的代码在浏览器环境下测试。需要他的原因在于，你的代码可能设计在浏览器端执行的，在node环境下测试可能有些bug暴露不出来；另外，浏览器有兼容性问题，karma提供了手段让你的代码自动在多个浏览器(chrome，firefox，ie等)环境下运行。</p> <p>​	如果你的代码只会运行在node端，那么你不需要用karma。</p> <p><strong>暂时用不到</strong></p> <h2 id="mocha"><a href="#mocha" aria-hidden="true" class="header-anchor">#</a> Mocha</h2> <p>​	Mocha（发音摩卡）是一个测试框架，在vue-cli中配合Mocha本身不带断言库，所以必须先引入断言库，Chai断言库实现单元测试。</p> <p>​	常用命令和用法不算太多，而Chai断言库可以看Chai.js断言库API中文文档,很简单，多查多用就能很快掌握。</p> <h3 id="断言库"><a href="#断言库" aria-hidden="true" class="header-anchor">#</a> 断言库</h3> <p>​	就是判断源码实际执行结果与预期结果是否一致，如果不一致就抛出一个错误。下面这句断言的意思是，调用add(1,1),结果应该等于2。</p> <div class="language- extra-class"><pre class="language-text"><code>var expect = require('chai').expect;
expect(1+1).to.be.equal(2);
</code></pre></div><p>​	<a href="http://chaijs.com/" target="_blank" rel="noopener noreferrer">Chai是一种断言库<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>​	所有的测试用例(IT块)都应该含有一句或多句的断言。它是编写测试用例的关键。断言功能能由断言库来实现。</p> <h3 id="chai的基本使用"><a href="#chai的基本使用" aria-hidden="true" class="header-anchor">#</a> Chai的基本使用</h3> <p><a href="https://www.jianshu.com/p/2df72e64a7ca?fromApp=1" target="_blank" rel="noopener noreferrer">基本使用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="使用测试步骤（一）"><a href="#使用测试步骤（一）" aria-hidden="true" class="header-anchor">#</a> 使用测试步骤（一）</h3> <div class="language- extra-class"><pre class="language-text"><code>1、Node环境下安装Vue-Cli
2、初始化项目
3、可以运行初始化的测试
npm run unit
- Vue脚手架已经初始化了一个HelloWorld.spec.js的测试文件去测试HelloWord.vue。
- 你可以在 test/unit/specs/HelloWord.spec.js下找到这个测试文件(提示：将来所有的测试文件，都将放在specs这个目录下，并以测试脚本名.specs.js结尾命名！)
</code></pre></div><p><a href="https://cn.vuejs.org/v2/guide/unit-testing.html" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/gangking/myBlog/edit/master/docs/vue/04.md" target="_blank" rel="noopener noreferrer">编辑文档</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2019-8-20 22:25:34</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/myBlog/vue/03.html" class="prev">
          Vue源码
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/myBlog/assets/js/app.9a205e1a.js" defer></script><script src="/myBlog/assets/js/2.c03f67b8.js" defer></script><script src="/myBlog/assets/js/35.ecaae5f1.js" defer></script>
  </body>
</html>
