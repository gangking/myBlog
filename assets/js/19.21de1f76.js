(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{218:function(t,e,a){"use strict";a.r(e);var r=a(0),s=Object(r.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"前端防止xss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端防止xss","aria-hidden":"true"}},[t._v("#")]),t._v(" 前端防止xss")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/meituantech/p/9718677.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考1"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue","aria-hidden":"true"}},[t._v("#")]),t._v(" vue")]),t._v(" "),a("h3",{attrs:{id:"_1、引入xss工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、引入xss工具","aria-hidden":"true"}},[t._v("#")]),t._v(" 1、引入XSS工具")]),t._v(" "),a("p",[t._v("1.在终端引入xss,命令：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install xss --save\n")])])]),a("p",[t._v("2.在vue的页面进行引入")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import xss from 'xss'\n")])])]),a("p",[t._v("3.定义一个变量进行测试")]),t._v(" "),a("p",[t._v("首先测试一个没有进行防止xss攻击的测试")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<p v-html="test"></p>\n\nexport default {\n  data () {\n    return {\n      test: `<a onclick=\'alert("xss攻击")\'>链接</a>`\n    }\n}\n')])])]),a("p",[t._v("结果，js事件直接被翻译了")]),t._v(" "),a("p",[t._v("因此应该杜绝这些情况，解决方法如下")]),t._v(" "),a("p",[t._v("4、进行拦截")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<p v-html=\"$xss(test)\"></p>\n\nimport xss from 'xss'\nexport default {\n  data () {\n    return {\n      test: `<a onclick='alert(\"xss攻击\")'>链接</a>`\n    }\n}\n\nObject.defineProperty(Vue.prototype, '$xss', {\n  value: xss\n})\n")])])]),a("p",[t._v("此时a标签会保留，但是onclick事件被拦截了")]),t._v(" "),a("h3",{attrs:{id:"_2、直接不用v-html指令即可"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、直接不用v-html指令即可","aria-hidden":"true"}},[t._v("#")]),t._v(" 2、直接不用v-html指令即可")]),t._v(" "),a("h2",{attrs:{id:"react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react","aria-hidden":"true"}},[t._v("#")]),t._v(" React")]),t._v(" "),a("p",[t._v("​\t默认情况下，React DOM 在重新渲染页面时将所有进行转码，官方宣称在 React 应用中确保不会注入任何没显式编写的数据，所有的数据在页面渲染之前都会被转换成字符串，这防止 XSS 进攻。")]),t._v(" "),a("p",[t._v("​\t著名的"),a("a",{attrs:{href:"https://www.owasp.org/index.php/About_OWASP",target:"_blank",rel:"noopener noreferrer"}},[t._v("Open Web Application Security Project"),a("OutboundLink")],1),t._v("项目就为我们提供了很多关于"),a("a",{attrs:{href:"https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet",target:"_blank",rel:"noopener noreferrer"}},[t._v("防止XSS攻击"),a("OutboundLink")],1),t._v("的建议，概括而言，我们需要在应用中做到如下几点:")]),t._v(" "),a("ul",[a("li",[t._v("所有的用户输入都需要经过HTML实体编码，这里React已经帮我们做了"),a("a",{attrs:{href:"https://facebook.github.io/react/docs/introducing-jsx.html#jsx-prevents-injection-attacks",target:"_blank",rel:"noopener noreferrer"}},[t._v("很多"),a("OutboundLink")],1),t._v("，它会在运行时动态创建DOM节点然后填入文本内容（你也可以强制设置HTML内容，不过这样比较危险）")]),t._v(" "),a("li",[t._v("当你打算序列化某些状态并且传给客户端的时候，你同样需要进行HTML实体编码")])]),t._v(" "),a("h3",{attrs:{id:"serialize-javascript"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serialize-javascript","aria-hidden":"true"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://github.com/yahoo/serialize-javascript",target:"_blank",rel:"noopener noreferrer"}},[t._v("Serialize JavaScript"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("​\tYahoo的工程师已经提供了一个"),a("a",{attrs:{href:"https://github.com/yahoo/serialize-javascript",target:"_blank",rel:"noopener noreferrer"}},[t._v("Serialize JavaScript"),a("OutboundLink")],1),t._v("模块帮我们轻松地进行JSON转码与过滤，我们可以直接使用"),a("code",[t._v("npm install --save serialize-javascript")]),t._v("导入该模块，然后使用"),a("code",[t._v("serialize")]),t._v("方法替代内置的"),a("code",[t._v("JSON.stringify")]),t._v("方法:")])])},[],!1,null,null,null);e.default=s.exports}}]);