(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{200:function(t,a,e){"use strict";e.r(a);var n=e(0),s=Object(n.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"vue项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue项目","aria-hidden":"true"}},[t._v("#")]),t._v(" Vue项目")]),t._v(" "),e("h2",{attrs:{id:"喵喵电影"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#喵喵电影","aria-hidden":"true"}},[t._v("#")]),t._v(" 喵喵电影")]),t._v(" "),e("p",[e("a",{attrs:{href:"http://39.97.33.178/miaomiao",target:"_blank",rel:"noopener noreferrer"}},[t._v("项目预览"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/gangking/miaomiao/tree/dev",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"项目开发流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目开发流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目开发流程")]),t._v(" "),e("h3",{attrs:{id:"_1、产品立项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、产品立项","aria-hidden":"true"}},[t._v("#")]),t._v(" 1、产品立项")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("客户需求分析")])]),t._v(" "),e("li",[e("p",[t._v("整理需求文档")])]),t._v(" "),e("li",[e("p",[t._v("项目成立会")])])]),t._v(" "),e("h3",{attrs:{id:"_2、产品原型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、产品原型","aria-hidden":"true"}},[t._v("#")]),t._v(" 2、产品原型")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("设计产品原型图-Axure RP 工具等")])]),t._v(" "),e("li",[e("p",[t._v("UI设计--PS工具、AI工具等")])])]),t._v(" "),e("h3",{attrs:{id:"_3、项目开发"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、项目开发","aria-hidden":"true"}},[t._v("#")]),t._v(" 3、项目开发")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("项目需求分析")])]),t._v(" "),e("li",[e("p",[t._v("项目工期评估")])]),t._v(" "),e("li",[e("p",[t._v("项目责任划分")])]),t._v(" "),e("li",[e("p",[t._v("前端")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("静态页面制作\n前端框架选型\n前端页面架构\n")])])])]),t._v(" "),e("li",[e("p",[t._v("后端")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("数据库开发\nAPI接口文档\nAPI接口实现\n")])])])])]),t._v(" "),e("h3",{attrs:{id:"_4、项目测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4、项目测试","aria-hidden":"true"}},[t._v("#")]),t._v(" 4、项目测试")]),t._v(" "),e("ul",[e("li",[t._v("开发测试")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("- 单元测试\n- E2E测试\n检测项目开发问题，是否冗余臃肿\n")])])]),e("ul",[e("li",[t._v("灰度测试")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("功能测试\n压力测试\n服务器测试、\n用例测试\n- 数据来源真实，环境还是测试环境不是真实的\n")])])]),e("ul",[e("li",[t._v("线上测试")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("指定群体测试\n反馈搜集\n版本迭代\n- 内测，指定人群\n")])])]),e("h3",{attrs:{id:"_5、项目上线"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5、项目上线","aria-hidden":"true"}},[t._v("#")]),t._v(" 5、项目上线")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("打包前端模块")])]),t._v(" "),e("li",[e("p",[t._v("远程服务器部署")])]),t._v(" "),e("li",[e("p",[t._v("监控异常")])])]),t._v(" "),e("h2",{attrs:{id:"技术要点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#技术要点","aria-hidden":"true"}},[t._v("#")]),t._v(" 技术要点")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("vue")])]),t._v(" "),e("li",[e("code",[t._v("vuex")])]),t._v(" "),e("li",[e("code",[t._v("vue-router")])]),t._v(" "),e("li",[e("code",[t._v("better-scroll")])]),t._v(" "),e("li",[e("code",[t._v("proxy")])]),t._v(" "),e("li",[e("code",[t._v("axios")])])]),t._v(" "),e("h2",{attrs:{id:"文件目录树"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文件目录树","aria-hidden":"true"}},[t._v("#")]),t._v(" 文件目录树")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".\n├── README.md\n├── babel.config.js\n├── package-lock.json\n├── package.json\n├── public (存放公共文件)\n│   ├── css\n│   │   └── reset.css\n│   ├── favicon.ico\n│   ├── font (字体图表文件)\n│   │   ├── iconfont.eot\n│   │   ├── iconfont.svg\n│   │   ├── iconfont.ttf\n│   │   ├── iconfont.woff\n│   │   └── iconfont.woff2\n│   └── index.html\n├── src\n│   ├── App.vue\n│   ├── assets (存放一些图片等)\n│   │   ├── CityHall.png\n│   │   ├── lazy1.jpg\n│   │   ├── max.png\n│   │   ├── message.png\n│   │   ├── movie.jpg\n│   │   ├── movie.png\n│   │   └── personal.png\n│   ├── components(子组件)\n│   │   ├── cityIndex\n│   │   ├── footer\n│   │   ├── header\n│   │   ├── js\n│   │   ├── loading\n│   │   ├── movieIndex\n│   │   ├── personIndex\n│   │   └── scroller\n│   ├── main.js（入口文件）\n│   ├── routers (路由文件)\n│   │   ├── city\n│   │   ├── index.js\n│   │   ├── movie\n│   │   └── person\n│   ├── stores (状态管理文件)\n│   │   ├── city\n│   │   └── index.js\n│   └── views （主要示图文件）\n│       ├── city\n│       ├── movie\n│       └── person\n├── tree.md\n└── vue.config.js\n")])])]),e("h2",{attrs:{id:"项目接口文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目接口文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目接口文件")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("接口名称")]),t._v(" "),e("th",[t._v("请求方式")]),t._v(" "),e("th",[t._v("请求示列")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("正在热映")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/movieOnInfoList?cityId=10",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/movieOnInfoList?cityId=10"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("即将上映")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/movieComingList?cityId=10",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/movieComingList?cityId=10"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("搜索")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/searchList?cityId=10&kw=a",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/searchList?cityId=10&kw=a"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("城市")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/cityList",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/cityList"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("电影详情")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/detailmovie?movieId=345808",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/detailmovie?movieId=345808"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("影院")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/cinemaList?cityId=10",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/cinemaList?cityId=10"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("城市定位")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/getLocation",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/getLocation"),e("OutboundLink")],1)])])])]),t._v(" "),e("h2",{attrs:{id:"多人协作和静态布局"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多人协作和静态布局","aria-hidden":"true"}},[t._v("#")]),t._v(" 多人协作和静态布局")]),t._v(" "),e("h3",{attrs:{id:"多人协作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#多人协作","aria-hidden":"true"}},[t._v("#")]),t._v(" 多人协作")]),t._v(" "),e("p",[e("img",{attrs:{src:"G:%5CTestProject%5CPersonalBlog%5CmyBlog%5Cdocs%5Cstatic%5Cimg%5Cvue%5Cxiezuo.png",alt:""}})]),t._v(" "),e("p",[t._v("​\t版本管理工具（例如：GIT），项目创建主分支，再创建开发分支，开发完成后，由项目经理将分支合并到主干；")]),t._v(" "),e("p",[t._v("​\t主要是避免冲突，视实际情况处理；")]),t._v(" "),e("h3",{attrs:{id:"初始化项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目","aria-hidden":"true"}},[t._v("#")]),t._v(" 初始化项目")]),t._v(" "),e("h3",{attrs:{id:"静态布局demo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#静态布局demo","aria-hidden":"true"}},[t._v("#")]),t._v(" 静态布局demo")]),t._v(" "),e("p",[t._v("（非必须）")]),t._v(" "),e("h3",{attrs:{id:"数据接口api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据接口api","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据接口api")]),t._v(" "),e("p",[t._v("（后端提供，可以根据后端接口文档写模拟数据）")]),t._v(" "),e("h3",{attrs:{id:"vue脚手架搭建（3-0）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue脚手架搭建（3-0）","aria-hidden":"true"}},[t._v("#")]),t._v(" Vue脚手架搭建（3.0）")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://blog.csdn.net/xuqipeter/article/details/80452271",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("vue create miaomiao\n\nvue create is a Vue CLI 3 only command and you are using Vue CLI 2.9.6.\nYou may want to run the following to upgrade to Vue CLI 3:\n\nnpm uninstall -g vue-cli\nnpm install -g @vue/cli\n注意：这种方式必须将vue-cli工具更新至3.0版本\n")])])]),e("p",[e("img",{attrs:{src:"G:%5CTestProject%5CPersonalBlog%5CmyBlog%5Cdocs%5Cstatic%5Cimg%5Cvue%5Cinstallvuecli.png",alt:""}})]),t._v(" "),e("p",[t._v("​\tvue-cli 内置支持了8个功能特性，可以多选：使用方向键在特性选项之间切换，"),e("strong",[t._v("使用空格键选中当前特性")]),t._v("，使用 a 键切换选择所有，使用 i 键翻转选项。")]),t._v(" "),e("p",[e("img",{attrs:{src:"G:%5CTestProject%5CPersonalBlog%5CmyBlog%5Cdocs%5Cstatic%5Cimg%5Cvue%5Cinstallvuecli2.png",alt:""}})]),t._v(" "),e("p",[t._v("重新确认选项")]),t._v(" "),e("p",[e("img",{attrs:{src:"G:%5CTestProject%5CPersonalBlog%5CmyBlog%5Cdocs%5Cstatic%5Cimg%5Cvue%5Cinstallvuecli3.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"启动项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动项目","aria-hidden":"true"}},[t._v("#")]),t._v(" 启动项目")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm run server\n打包命令照旧\n")])])]),e("p",[e("img",{attrs:{src:"G:%5CTestProject%5CPersonalBlog%5CmyBlog%5Cdocs%5Cstatic%5Cimg%5Cvue%5Cvue3run.png",alt:""}})]),t._v(" "),e("p",[t._v("注意：必须处于同一网络")]),t._v(" "),e("h3",{attrs:{id:"创建远程仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建远程仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建远程仓库")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/gangking/miaomiao",target:"_blank",rel:"noopener noreferrer"}},[t._v("项目仓库地址"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("注意：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("主分支上不要开发；")])]),t._v(" "),e("li",[e("p",[t._v("单独创建一个开发分支；")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("例如：\ngit checkout -b dev\n\n上传到开发分支\ngit push origin dev\n")])])]),e("p",[t._v("​\t在开发分支也需要创一个当前想要开发的分支，因为也是多人开发。")]),t._v(" "),e("h2",{attrs:{id:"vue3-0脚手架小知识"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue3-0脚手架小知识","aria-hidden":"true"}},[t._v("#")]),t._v(" VUE3.0脚手架小知识")]),t._v(" "),e("ol",[e("li",[t._v("静态资源图片可以转换成base64位，提交加载效率（可选）")])]),t._v(" "),e("h2",{attrs:{id:"路由配置与初始化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路由配置与初始化","aria-hidden":"true"}},[t._v("#")]),t._v(" 路由配置与初始化")]),t._v(" "),e("p",[t._v("​\t正式开发，在开发分支上再创建一个分支")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git checkout -b createcomponents\n")])])]),e("h3",{attrs:{id:"路由和数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路由和数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 路由和数据")]),t._v(" "),e("p",[t._v("​\t单独通过文件夹的方式存放，同时文件中通过index.js来将所有内容导出即可，这样能减少代码量。")]),t._v(" "),e("p",[t._v("​\t路由的话对于大型项目而言不建议直接写在index.js下面，同样可以通过创建对应文件夹的形式分模块管理。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("++ routers\n+++ index.js\n+++ cinama\n++++ index.js\n+++ mine\n++++ index.js\n+++ movie\n++++ index.js\n\n++ stores\n+++ index.js\n\n")])])]),e("p",[t._v("路由分目录下只需要暴露路由方式即可")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("例如：\nexport default {\n  path: '/movie',\n  component: () => import('@/views/Movie')\n}\n\n注意：\n    按需加载：component: () => import('@/views/Movie')\n\t@表示src目录\n\trouter主文件引入：\n+ import movieRouter from './movie'\n\nVue.use(Router)\n\nexport default new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [\n +   movieRouter\n  ]\n})\n")])])]),e("h3",{attrs:{id:"views"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#views","aria-hidden":"true"}},[t._v("#")]),t._v(" views")]),t._v(" "),e("p",[t._v("安装Vetur插件scaffold，快速生成vue模板")]),t._v(" "),e("ul",[e("li",[t._v("Movie")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("创建index.vue\n")])])]),e("ul",[e("li",[t._v("Chinema")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("创建index.vue\n")])])]),e("ul",[e("li",[t._v("Mine")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("创建index.vue\n")])])]),e("h2",{attrs:{id:"components"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#components","aria-hidden":"true"}},[t._v("#")]),t._v(" components")]),t._v(" "),e("p",[t._v("引入静态资源（public目录下）")]),t._v(" "),e("p",[t._v("index.html中")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">\n注意：\n\tuser-scalable=no禁止用户在手机屏幕上缩放\n\t\n网页小图标：\n<link rel="icon" href="<%= BASE_URL %>favicon.ico">\n注意：\n     <%= BASE_URL %>表示图片路径们可以在路由中指定\n')])])]),e("h3",{attrs:{id:"头部组件与底部导航组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#头部组件与底部导航组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 头部组件与底部导航组件")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Header")])]),t._v(" "),e("li",[e("p",[t._v("TabBar")])]),t._v(" "),e("li",[e("p",[t._v("City")])])]),t._v(" "),e("p",[t._v("注意：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("替组件添加name有利于调试")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("export default {\n  name: 'movie'\n}\n")])])])]),t._v(" "),e("li",[e("p",[t._v("组件创建完成之后在movie组件中引入即可使用")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("<template>\n  <div id=\"main\">\n    <Header></Header>\n    <TabBar></TabBar>\n  </div>\n</template>\n\n<script>\nimport Header from '@/components/Header'\nimport TabBar from '@/components/TabBar'\nexport default {\n  name: 'movie',\n  components: {\n    Header,\n    TabBar\n  }\n}\n<\/script>\n我的（mine）和电影院(cinama)组件同理即可\n")])])])]),t._v(" "),e("li",[e("p",[t._v("路由选中改造")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('App.vue\n可以用：keep-alive包裹\n\t因为切换路由每次都会重新渲染，这样比较消耗内存，keep-alive包裹能起到缓存作用。\n<keep-alive>\n    <router-view />\n</keep-alive>\n\n在movie - index.js中所有的按钮用router-link改造\n例如：\n<router-link tag="li" to=\'/movie\'>\n   <i class="iconfont icon-dianying"></i>\n   <p>电影</p>\n</router-link>\n\n这样只要路由匹配上了，就会默认添加router-link-active类名\n即，\n#footer ul li.router-link-active {\n  color: #f03d37;\n}\n')])])])]),t._v(" "),e("li",[e("p",[t._v("顶部文字标题联动(父子通信)")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("header - index.vue\nprops: {\n    title: {\n      type: String,\n      default: '喵喵电影'\n    }\n}\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"电影路由与组件拆分"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#电影路由与组件拆分","aria-hidden":"true"}},[t._v("#")]),t._v(" 电影路由与组件拆分")]),t._v(" "),e("h3",{attrs:{id:"公共组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#公共组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 公共组件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("城市\n+ City\n++ index.vue\n\n正在热映\n+ NowPlaying\n++ index.vue\n\n即将上映\n+ CommiSoon\n++ index.vue\n\n搜索\n+ Search\n++ index.vue\n")])])]),e("h3",{attrs:{id:"路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路由","aria-hidden":"true"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("1、重定向\n例：\nroutes: [\n    movieRouter,\n    cinameRouter,\n    mineRouter,\n    {\n      path: '/',\n      redirect: '/movie'\n    }\n  ]\n  2、电影下子路由\n  export default {\n  path: '/movie',\n  component: () => import('@/views/Movie'),\n  children: [\n    {\n      path: 'city',\n      component: () => import('@/components/City')\n    }\n  ]\n}\ncommiSoon、nowPlaying、search同理\n空白错误：\n原因：{ import('@/components/City') }不应该加{}\n解决办法：去掉{}即可\n\n3、路由跳转\n4、重定向至正在热映\n{\n   path: '/movie',\n   redirect: '/movie/nowPlaying'\n}\n")])])]),e("h2",{attrs:{id:"影院组件与登录组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#影院组件与登录组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 影院组件与登录组件")]),t._v(" "),e("h3",{attrs:{id:"影院组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#影院组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 影院组件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("components\n++ CiList\n++ index.vue\n")])])]),e("h3",{attrs:{id:"登录组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登录组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 登录组件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("登录组件\n++ Login\n++ index.vue\n")])])]),e("p",[t._v("提交代码：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("1、代码提交\ngit add .\ngit commit -m \"add createcomponent\"\n\n2、再切换回开发分支\ngit checkout dev\n\n3、分支合并\ngit merge createcomponents --no-ff\n--no-ff 会将合并记录添加到git log当中\n\n4、git log\nMerge: 035d0b2 b9d9034\nAuthor: gangking <gangking@foxmail.com>\nDate:   Sat Aug 10 18:06:42 2019 +0800\n\n    Merge branch 'createcomponents' into dev\n\ncommit b9d90342edf7bdaee662519e3d899e796bd72e98 (createcomponents)\nAuthor: gangking <gangking@foxmail.com>\nDate:   Sat Aug 10 18:02:34 2019 +0800\n\n    add reatecomponnet\n说明合并成功！\n\n5、提交到远程仓库\ngit push origin dev\n\n6、删除分支\ngit branch -d createcomponents\n\n7、查看当前分支\ngit branch\n")])])]),e("h2",{attrs:{id:"城市组件数据渲染"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#城市组件数据渲染","aria-hidden":"true"}},[t._v("#")]),t._v(" 城市组件数据渲染")]),t._v(" "),e("p",[t._v("1、先创建一个新分支")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git checkout -b setData\n\n模拟数据方法：\n1、charles\n2、easy mock\n3、y-api\n")])])]),e("table",[e("thead",[e("tr",[e("th",[t._v("接口名")]),t._v(" "),e("th",[t._v("请求方式")]),t._v(" "),e("th",[t._v("请求示例")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("城市")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/cityList",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/cityList"),e("OutboundLink")],1)])])])]),t._v(" "),e("p",[t._v("反向代理解决跨域")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("根目录下新建\nvue.config.js\n\nmodule.exports = {\n  devServer: {\n    proxy: {\n      '/api2': {\n        target: 'http://localhost:3000',// 代理地址\n        changeOrigin: true// 是否改变代理地址\n      },\n      '/api': {\n        target: 'http://39.97.33.178',\n        changeOrigin: true\n      }\n    }\n  }\n}\n\n重启脚手架生效\n")])])]),e("h3",{attrs:{id:"axios"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#axios","aria-hidden":"true"}},[t._v("#")]),t._v(" axios")]),t._v(" "),e("p",[t._v("安装")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm i axios -S\n\nmain.js\nimport axios from 'axios'\nVue.prototype.axios = axios;\n")])])]),e("p",[t._v("获取数据")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mounted () {\n    this.axios.get('/api/cityList').then((res) => {\n      console.log(res)\n    }).catch(() => {\n\n    })\n}\n")])])]),e("p",[t._v("数据分类")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("1、数据格式\nformatCityList (cities) {\n      var cityList = [];\n      var hotList = [];\n\n      for (var i = 0; i < cities.length; i++) {\n\n        // 获取数据的第一个字母同时转换成大写\n        var firstLetter = cities[i].py.substring(0, 1).toUpperCase();\n        if (toCom(firstLetter)) {// 新添加索引\n          cityList.push({ index: firstLetter, list: [{ nm: cities[i].nm, id: cities[i].id }] });\n\n        } else {// 累加索引\n          // console.log('累加')\n          for (var j = 0; j < cityList.length; j++) {\n            if (cityList[j].index == firstLetter) {\n              cityList[j].list.push({ nm: cities[i].nm, id: cities[i].id })\n            }\n          }\n        }\n      }\n\n      function toCom (firstLetter) {\n        for (var i = 0; i < cityList.length; i++) {\n          if (cityList[i].index === firstLetter) {\n            return false;\n          }\n        }\n        return true;\n      }\n}\n\n2、数据排序\n// 数据排序\ncityList.sort((n1, n2) => {\n   if (n1.index > n2.index) {\n      return 1;\n   }\n   else if (n1.index < n2.index) {\n      return -1;\n   }\n   else {\n      return 0;\n   }\n});\n报错：npm install --save core-js\n\n3、热门城市\nfor (var i = 0; i < cities.length; i++) {\n   if (cities[i].isHot === 1) {\n      hotList.push(cities[i]);\n   }\n}\n")])])]),e("h3",{attrs:{id:"数据渲染"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据渲染","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据渲染")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("1、先定义data数据\ndata () {\n    return {\n      cityList: [],\n      hotList: []\n    }\n  },\n  \n2、再通过v-for去渲染即可\n\n3、点击右侧拼音跳转到指定城市\n- 绑定事件\n<li v-for=\"(item,index) in cityList\"\n    :key=\"item.index\"\n    @touchstart='handleIndex(index)'>\n   {{item.index}}\n</li>\n注意：touchstart指移动端触摸事件；\n- 获取城市组件中每项的h2标题滚动距离\n- 再通过给城市组件设置滚动距离来实现\n例：\nhandleIndex (index) {\n      var h2 = this.$refs.city_sort.getElementsByTagName('h2');\n      this.$refs.city_sort.parentNode.scrollTop = h2[index].offsetTop;\n}\n")])])]),e("h2",{attrs:{id:"热映电影组件数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#热映电影组件数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 热映电影组件数据")]),t._v(" "),e("p",[t._v("数据接口")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("接口名称")]),t._v(" "),e("th",[t._v("请求方式")]),t._v(" "),e("th",[t._v("请求示列")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("正在热映")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/movieOnInfoList?cityId=10",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/movieOnInfoList?cityId=10"),e("OutboundLink")],1)])]),t._v(" "),e("tr",[e("td",[t._v("即将上映")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[e("a",{attrs:{href:"http://39.97.33.178/api/movieComingList?cityId=10",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://39.97.33.178/api/movieComingList?cityId=10"),e("OutboundLink")],1)])])])]),t._v(" "),e("h3",{attrs:{id:"请求数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求数据")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("this.axios.get('/api/movieOnInfoList?cityId=10').then((res) => {\n      console.log(res)\n      var msg = res.data.msg;\n      var data = res.data.data;\n      if (msg === 'ok') {\n        this.movieList = data.movieList;\n      }\n    })\n")])])]),e("h3",{attrs:{id:"数据渲染-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据渲染-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据渲染")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<ul>\n      <li v-for="(item) in movieList"\n          :key="item.id">\n        <div class="pic_show"><img :src="item.img"></div>\n        <div class="info_list">\n          <h2>{{item.nm}}</h2>\n          <p>观众评 <span class="grade">{{item.sc}}</span></p>\n          <p>主演: {{item.star}}</p>\n          <p>{{item.showInfo}}</p>\n        </div>\n        <div class="btn_mall">\n          购票\n        </div>\n      </li>\n</ul>\n\n问题：\n\t图片渲染不出来\n原因：\n\t地址问题：http://p0.meituan.net/w.h/movie/f75fcb7696d55452e32794b2219700b9840805.jpg\n\tw.h\n解决方式：使用过滤器\n++ filter\n+++ index.js\nimport Vue from "vue";\n\nVue.filter(\'setWH\',(url,arg)=>{\n  // 正则替换，将w.h替换成指定的arg\n  return url.replace(/w\\.h/,arg);\n})\n主函数引入即可\n\n组件使用\n<img :src="item.img | setWH(\'128.180\')"></div>\n\n即将上映同理\n')])])]),e("h2",{attrs:{id:"搜索组件数据渲染"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搜索组件数据渲染","aria-hidden":"true"}},[t._v("#")]),t._v(" 搜索组件数据渲染")]),t._v(" "),e("p",[t._v("​\t最开始列表是没有数据的，需要通过搜索框调接口，进行异步数据渲染，所以需要定义一个data数据来通过watch监听数据。")]),t._v(" "),e("p",[t._v("即：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("data () {\n    return {\n      message: '',\n      moviesList: []\n    }\n  },\n  watch: {\n    message (val) {\n      console.log(val)\n      this.axios.get('/api/searchList?cityId=10&kw=a').then((res) => {\n        console.log(res)\n      })\n    }\n  },\n 按数据渲染即可\n \n 问题：watch数据是实时监控的，所以快速输入的时候涉及到接口多次请求问题\n 优化：\n \t函数防抖策略\n")])])]),e("h3",{attrs:{id:"函数防抖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#函数防抖","aria-hidden":"true"}},[t._v("#")]),t._v(" 函数防抖")]),t._v(" "),e("p",[t._v("​\t即，快速输入的时候只是针对最后一次去触发，而之前的要进行清除。不让之前的输入触发。")]),t._v(" "),e("p",[t._v("1、原生定时器")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("clearTimeout()\nsetTimeout()\n意思就是，将请求放在setTimeout中，每次watch变化时先清除定时器，\n就能保证是最后一次触发\n")])])]),e("p",[t._v("2、axios本身的防抖策略")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("axios终止多次请求\nwatch: {\n    message (val) {\n+      var that = this;\n      // 取消上一次请求\n+      this.cancelRequest();\n\n      this.axios.get('/api/searchList?cityId=10&kw=' + val, {\n+       cancelToken: new this.axios.CancelToken(function executor (c) {\n          that.source = c;\n        })\n      }).then((res) => {\n        console.log(res.data.data)\n        var msg = res.data.msg;\n        var data = res.data.data;\n        if (msg === 'ok') {\n          this.moviesList = data.movies.list;\n        }\n      }).catch((err) => {\n+        if (this.axios.isCancel(err)) {\n          console.log('Rquest canceled', err.message); //请求如果被取消，这里是返回取消的message\n        } else {\n          //handle error\n          console.log(err);\n        }\n      })\n    }\n  },\n  methods: {\n +   cancelRequest () {\n      if (typeof this.source === 'function') {\n        this.source('终止请求')\n      }\n    },\n  }\n\n\n注意：ajax的abort()方法也可以\n")])])]),e("h2",{attrs:{id:"影院数据渲染"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#影院数据渲染","aria-hidden":"true"}},[t._v("#")]),t._v(" 影院数据渲染")]),t._v(" "),e("p",[t._v("数据请求")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mounted () {\n    this.axios.get('/api/cinemaList?cityId=10').then((res) => {\n      console.log(res)\n      var msg = res.data.msg;\n      var data = res.data.data;\n      if (msg === 'ok') {\n        this.cinemaList = data.cinemas;\n      }\n    })\n  }\n")])])]),e("p",[t._v("数据渲染")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("主要是卡片渲染：\n<div class=\"card\">\n          <div v-for=\"(itemCar,key) in item.tag\"\n               :key=\"key\"\n               style=\"border:0;padding:0;margin:0\">\n            <div v-if=\"itemCar==1\"\n                 :class=\"key | classCard\">\n              {{key | formatCard}}\n            </div>\n          </div>\n        </div>\n映射：\n局部过滤器\nfilters: {\n    // 过滤卡片名\n    formatCard (key) {\n      var card = {\n        'allowRefund': '改签',\n        'endorse': '退',\n        'sell': '折扣卡',\n        'snack': '小吃'\n      }\n      return card[key];\n    },\n    // 过滤卡片样式\n    classCard () {\n      var card = {\n        'allowRefund': 'bl',\n        'endorse': 'bl',\n        'sell': 'or',\n        'snack': 'or'\n      }\n      return card[key];\n    }\n  },\n")])])]),e("h2",{attrs:{id:"城市定位功能实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#城市定位功能实现","aria-hidden":"true"}},[t._v("#")]),t._v(" 城市定位功能实现")]),t._v(" "),e("p",[t._v("新建一个分支: git checkout-b getcCity")]),t._v(" "),e("p",[t._v("问题1列表点击操作，选择什么事件？")]),t._v(" "),e("p",[t._v("​\t移动端一般选择 touchstart（一般不要选click，会有延时），但是 touchstart 在点击和滑动的时候都会触发。")]),t._v(" "),e("p",[t._v("解决：使用tap事件。")]),t._v(" "),e("p",[t._v("​\t点击时候触发，滑动的时候不触发，但是vue没有tap事件，需要自己模拟。")]),t._v(" "),e("h3",{attrs:{id:"模拟tap事件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模拟tap事件","aria-hidden":"true"}},[t._v("#")]),t._v(" 模拟tap事件")]),t._v(" "),e("p",[t._v("主要有以下几种方案：")]),t._v(" "),e("p",[t._v("1、利用 touchstart 、 touchmove  、touchend来模拟；")]),t._v(" "),e("p",[t._v("2、移动端zepto 也提供tap事件")]),t._v(" "),e("p",[t._v("3、vue-touch")]),t._v(" "),e("p",[t._v("4、利用better-scroll第三方模块也自带tap方法")]),t._v(" "),e("p",[t._v("问题2滑动不流畅？")]),t._v(" "),e("p",[t._v("几种解决方法：")]),t._v(" "),e("p",[t._v("1、iscroll")]),t._v(" "),e("p",[t._v("2、swiper")]),t._v(" "),e("p",[t._v("3、better-scroll (对iscroll进行了二次封装)")]),t._v(" "),e("h3",{attrs:{id:"better-scroll"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#better-scroll","aria-hidden":"true"}},[t._v("#")]),t._v(" better-scroll")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/cangqinglang/p/8553746.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("参数方法"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("安装")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("npm i better-scroll -S\n")])])]),e("p",[t._v("用法原理")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("- 固定高度的盒子中套要滑动的组件\n\n在正在热映中先试验下功能\nimport BScroll from 'better-scroll';\n\n// vue方法保证页面渲染完成之后触发\nthis.$nextTick(() => {\n     // 两个参数：最外层容器，配置对象\n     new BScroll(this.$refs.movie_body, {\n         tap: true\n     });\n})\n\n注意：只有配置了tap，组建中绑定@tap事件才生效\n\n上拉加载和下拉刷新功能\n先配置：\nprobeType: 1 \n// 1 滚动的时候会派发scroll事件，会截流。\n// 2 滚动的时候实时派发scroll事件，不会截流。 \n// 3 除了实时派发scroll事件，在swipe的情况下仍然能实时派发scroll事件\n\n再绑定事件\n// 拖拽滚动时触发\nscroll.on('scroll', () => {\n    console.log('scroll')\n})\n\n// 拖拽滚动结束后触发\nscroll.on('touchEnd', () => {\n    console.log('touchend')\n})\n")])])]),e("h3",{attrs:{id:"封装scroll组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#封装scroll组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 封装Scroll组件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("++ Scroll\n+++ index.vue\n\n定义为全局组件\nmian.js中引入\nimport Scroll from './components/Scroll'\nVue.component('Scroll', Scroll)\n\n再在对应组建中将滑动内容包裹\n<Scroll></Scroll>\n\n传递方法过去即可，即将热映同理\n影院，城市\n城市组件中使用之后发现右侧字母点击跳转失效：\n\nscroll滚动组件中定义：\nmethods: {\n    toScrollTop (y) {\n      this.scroll.scrollTo(0, y);\n    }\n  }\ncity组件中改为：\n<Scroll ref=\"city_List\"></Scroll>\nthis.$refs.city_List.toScrollTop(-h2[index].offsetTop);\n")])])]),e("h3",{attrs:{id:"封装loading组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#封装loading组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 封装Loading组件")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://codepen.io/anon/pen/GemNze",target:"_blank",rel:"noopener noreferrer"}},[t._v("<动画地址"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('同样注册为全局组件\n与滚动组件联合使用\n<Loading v-if="isLoading"></Loading>\n<Scroll v-else\n        :handleToScroll="handleToScroll"\n        :handleToTouchEnd="handleToTouchEnd">\n</Scroll>\n')])])]),e("h2",{attrs:{id:"当前城市本地存储与状态管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#当前城市本地存储与状态管理","aria-hidden":"true"}},[t._v("#")]),t._v(" 当前城市本地存储与状态管理")]),t._v(" "),e("h3",{attrs:{id:"本地存储"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#本地存储","aria-hidden":"true"}},[t._v("#")]),t._v(" 本地存储")]),t._v(" "),e("p",[t._v("​\t二次刷新后直接从本地存储中取值，如果有值，就不再发送请求")]),t._v(" "),e("h3",{attrs:{id:"vuex状态管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vuex状态管理","aria-hidden":"true"}},[t._v("#")]),t._v(" VueX状态管理")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("模块拆分拓展\nconst state = {\n    nm: window.localStorage.getItem('nowNm') || '北京',\n    id: window.localStorage.getItem('nowId') || 1\n};\nconst actions = {\n};\nconst mutations = {\n    CITY_INFO (state, payload) {\n        state.nm = payload.nm;\n        state.id = payload.id;\n    }\n};\nexport default {\n    namespaced: true,\n    state,\n    actions,\n    mutations\n}\n取用：\n<span>{{$store.state.city.nm}}</span>\n")])])]),e("h3",{attrs:{id:"点击城市"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#点击城市","aria-hidden":"true"}},[t._v("#")]),t._v(" 点击城市")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("handleToCity(nm,id){\n\t // 更新选中城市\n     this.$store.commit('city/CITY_INFO',{ nm , id });\n     // 存储选中城市\n     window.localStorage.setItem('nowNm',nm);\n     window.localStorage.setItem('nowId',id);\n     // 选择完城市后，返回正在热映\n     this.$router.push('/movie/nowPlaying');\n}\n")])])]),e("h3",{attrs:{id:"当前城市关联"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#当前城市关联","aria-hidden":"true"}},[t._v("#")]),t._v(" 当前城市关联")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("生命周期activated()：组件激活时调用\nactivated()替换mounted()\n\n问题：如果没有改变城市，只是切换页面，那么不应该做在这个生命周期函数中执行ajax请求。\n解决方式\n- data中新增pevCityId: -1\n- 然后请求之前从vuex中取数据\n- 在请求成功之后，给pevCityId赋值\n- 再到请求之前判断pevCityId是否和vuex中cityid一样\n- 如果一样则不再进行请求\n\n即将上映、影院和搜索同理\n注意：\n- 搜索组件不需要重新判断城市，因为每次都是异步渲染的\n")])])]),e("h3",{attrs:{id:"定位当前城市"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定位当前城市","aria-hidden":"true"}},[t._v("#")]),t._v(" 定位当前城市")]),t._v(" "),e("h4",{attrs:{id:"js弹窗组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js弹窗组件","aria-hidden":"true"}},[t._v("#")]),t._v(" js弹窗组件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("js模式组件\n+ JS\n+ index.js\n+  MessageBox\n++ index.vue\n\n\n重点inde.js\nimport Vue from 'vue';\nimport MessageBox from './MessageBox';\n\nexport var messageBox = (function () {\n\n    return function (opts) {  //配置参数\n\n        var defaults = {   //默认值\n            title: '',\n            content: '',\n            cancel: '',\n            ok: '',\n            // 取消和确认方法也在此定义\n            handleCancel: null,\n            handleOk: null\n        };\n\n        // 把MessageBox结合到vue中\n        var MyComponent = Vue.extend(MessageBox);\n\n        // 拿到配置参数\n        for (var attr in opts) {\n            defaults[attr] = opts[attr];\n        }\n\n        // 新建中间件VM实例\n        var vm = new MyComponent({\n            el: document.createElement('div'),\n            data: {\n                title: defaults.title,\n                content: defaults.content,\n                cancel: defaults.cancel,\n                ok: defaults.ok\n            },\n            methods: {\n                // 取消\n                handleCancel () {\n                    defaults.handleCancel && defaults.handleCancel.call(this);\n                    // 移除vm\n                    document.body.removeChild(vm.$el);\n                },\n                handleOk () {\n                    defaults.handleOk && defaults.handleOk.call(this);\n                    // 移除vm\n                    document.body.removeChild(vm.$el);\n                }\n            }\n        });\n\n        // 添加到body\n        document.body.appendChild(vm.$el);\n\n    };\n\n})();\n\n\n在movie中调用\nimport { messageBox } from '@/components/JS';\n\nsetTimeout(() => {\n      this.axios.get('/api/getLocation').then((res) => {\n        var msg = res.data.msg;\n        console.log(msg)\n        if (msg === 'ok') {\n          var nm = res.data.data.nm;\n          var id = res.data.data.id;\n          if (this.$store.state.city.id == id) { return; }\n          messageBox({\n            title: '定位',\n            content: nm,\n            cancel: '取消',\n            ok: '切换定位',\n            handleOk () {\n              window.localStorage.setItem('nowNm', nm);\n              window.localStorage.setItem('nowId', id);\n              // 刷新页面\n              window.location.reload();\n            }\n          });\n        }\n      });\n    }, 3000);\n")])])]),e("h2",{attrs:{id:"电影详情页组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#电影详情页组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 电影详情页组件")]),t._v(" "),e("h3",{attrs:{id:"基本布局"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本布局","aria-hidden":"true"}},[t._v("#")]),t._v(" 基本布局")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("不属于公共组件，所以放在Movie下\ndetail.vue\n\n路由引用：\n")])])]),e("h3",{attrs:{id:"路由高级用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路由高级用法","aria-hidden":"true"}},[t._v("#")]),t._v(" 路由高级用法")]),t._v(" "),e("h4",{attrs:{id:"命名视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命名视图","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://router.vuejs.org/zh/guide/essentials/named-views.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("命名视图"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("​\t有时候想同时 (同级) 展示多个视图，而不是嵌套展示，例如创建一个布局，有 "),e("code",[t._v("sidebar")]),t._v(" (侧导航) 和 "),e("code",[t._v("main")]),t._v(" (主内容) 两个视图，这个时候命名视图就派上用场了。你可以在界面中拥有多个单独命名的视图，而不是只有一个单独的出口。如果 "),e("code",[t._v("router-view")]),t._v(" 没有设置名字，那么默认为 "),e("code",[t._v("default")]),t._v("。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("<TabBar></TabBar>\n// 同级命名路由\n<router-view name='detail' />\n\n路由设置\n{\n    path: 'detail',\n    components: {\n         detail: () => import('@/views/Movie/detail')\n    }\n}\n")])])]),e("h3",{attrs:{id:"详情页返回列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#详情页返回列表","aria-hidden":"true"}},[t._v("#")]),t._v(" 详情页返回列表")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<Header title="影片详情">\n    <i class="iconfont icon-right" @touchstart="handleToBack"></i>\n</Header>\n\nmethods : {\n    handleToBack(){\n       // 后退\n       this.$router.back();\n    }\n},\n')])])]),e("h3",{attrs:{id:"进入详情"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入详情","aria-hidden":"true"}},[t._v("#")]),t._v(" 进入详情")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("<div class=\"pic_show\" @tap=\"handleToDetail(item.id)\">\n\nhandleToDetail(movieId){\n     //console.log(movieId);\n     this.$router.push('/movie/detail/1/' + movieId);\n},\n\n动态路由传值：\n{\n   path: 'detail/:movieId',\n   components: {\n       detail: () => import('@/views/Movie/detail')\n   }\n},\n\n取值：\n方式1：var detaiId = this.$route.params.movieId;\n方式2：路由组件传值\n首先配置路由；\n{\n            path: 'detail/:movieId',\n            components: {\n                detail: () => import('@/views/Movie/detail')\n            },\n            props: {\n                detail: true\n            }\n},\n组件中可以通过props取用\nprops: ['movieId'],\n  mounted () {\n    // var detaiId = this.$route.params.movieId;\n    console.log(this.movieId)\n  }\n")])])]),e("h3",{attrs:{id:"动画效果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动画效果","aria-hidden":"true"}},[t._v("#")]),t._v(" 动画效果")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('路由添加transition特效\nhttps://router.vuejs.org/zh/guide/advanced/transitions.html#%E5%8D%95%E4%B8%AA%E8%B7%AF%E7%94%B1%E7%9A%84%E8%BF%87%E6%B8%A1\n\n官网方式苹果手机会多执行一遍\n\n使用原生方式在详情页去实现\n <div id="detailContrainer"\n       class="slide-enter-active">\n </div>\n \n #detailContrainer.slide-enter-active{ animation:.3s slideMove;}\n@keyframes slideMove{\n    0%{ transform : translateX(100%); }\n    100%{ transform : translateX(0); }\n}\n')])])]),e("h3",{attrs:{id:"解决路由不匹配问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决路由不匹配问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 解决路由不匹配问题")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("{\n            path: 'detail/2/:movieId',\n            components: {\n                default: () => import('@/components/NowPlaying'),\n                detail: () => import('@/views/Movie/detail')\n            },\n            props: {\n                detail: true\n            }\n},\n{\n            path: 'detail/2/:movieId',\n            components: {\n                default: () => import('@/components/ComingSoon'),\n                detail: () => import('@/views/Movie/detail')\n            },\n            props: {\n                detail: true\n            }\n},\n")])])]),e("p",[t._v("功能基本完成，即将上映组件同理")]),t._v(" "),e("h3",{attrs:{id:"数据渲染-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据渲染-3","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据渲染")]),t._v(" "),e("p",[t._v("轮播图")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('背景图：\n<div class="detail_list_bg"\n             :style="{ \'background-image\' : \'url(\'+ detailMovie.img.replace(/w\\.h/,\'148.208\') +\')\' }"></div>\n\n\n<link rel="stylesheet" href="<%= BASE_URL %>libs/swiper-4.1.0.min.css">\n<script src="<%= BASE_URL %>libs/swiper-4.1.0.min.js"><\/script>\n')])])]),e("h2",{attrs:{id:"项目部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目部署")]),t._v(" "),e("p",[t._v("打包细节：")]),t._v(" "),e("p",[t._v("1、路由index.js")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('base:"miaomiao"// 文件夹名\n\n就会自动http://localhost:8080/miaomiao/movie/nowPlaying\n')])])]),e("p",[t._v("2、静态资源路径")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("vue.config.js\npublicPath: '/miaomiao'\n与devServer同级\n")])])])])},[],!1,null,null,null);a.default=s.exports}}]);