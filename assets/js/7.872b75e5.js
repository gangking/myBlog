(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{226:function(e,n,a){"use strict";a.r(n);var s=a(0),t=Object(s.a)({},function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"webpack基础（我认为）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack基础（我认为）","aria-hidden":"true"}},[e._v("#")]),e._v(" webpack基础（我认为）")]),e._v(" "),s("p",[e._v("源码："),s("a",{attrs:{href:"https://github.com/gangking/webpack",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/gangking/webpack"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"webpack-是什么？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-是什么？","aria-hidden":"true"}},[e._v("#")]),e._v(" webpack 是什么？")]),e._v(" "),s("p",[e._v("本质上，webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/gangking/myBlog/master/docs/static/img/webpack.png",alt:""}})]),e._v(" "),s("h2",{attrs:{id:"基本的概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本的概念","aria-hidden":"true"}},[e._v("#")]),e._v(" 基本的概念")]),e._v(" "),s("h3",{attrs:{id:"mode-开发模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mode-开发模式","aria-hidden":"true"}},[e._v("#")]),e._v(" mode 开发模式")]),e._v(" "),s("p",[e._v("webpack 提供 mode 配置选项，配置 webpack 相应模式的内置优化。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// webpack.production.config.js\nmodule.exports = {\n+  mode: 'production',// 产品模式\n}\n")])])]),s("h3",{attrs:{id:"入口文件-entry"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入口文件-entry","aria-hidden":"true"}},[e._v("#")]),e._v(" 入口文件(entry)")]),e._v(" "),s("p",[e._v("入口文件，类似于其他语言的起始文件。比如：c 语言的 main 函数所在的文件。")]),e._v(" "),s("p",[e._v("入口起点(entry point)指示 webpack 应该使用哪个模块，来作为构建其内部依赖图的开始。进入入口起点后，webpack 会找出有哪些模块和库是入口起点（直接和间接）依赖的。")]),e._v(" "),s("p",[e._v("可以在 webpack 的配置文件中配置入口，配置节点为： "),s("code",[e._v("entry")]),e._v(",当然可以配置一个入口，也可以配置多个。")]),e._v(" "),s("h3",{attrs:{id:"输出-output"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出-output","aria-hidden":"true"}},[e._v("#")]),e._v(" 输出(output)")]),e._v(" "),s("p",[e._v("output 属性告诉 webpack 在哪里输出它所创建的 bundles，以及如何命名这些文件。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\n\nmodule.exports = {\n  entry: './path/to/my/entry/file.js',\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: 'my-first-webpack.bundle.js'\n  }\n};\n")])])]),s("h3",{attrs:{id:"loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loader","aria-hidden":"true"}},[e._v("#")]),e._v(" loader")]),e._v(" "),s("p",[e._v("loader 让 webpack 能够去处理那些非 JavaScript 文件（webpack 自身只理解 JavaScript）。loader 可以将所有类型的文件转换为 webpack 能够处理的有效模块，然后你就可以利用 webpack 的打包能力，对它们进行处理。")]),e._v(" "),s("h3",{attrs:{id:"插件-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件-plugins","aria-hidden":"true"}},[e._v("#")]),e._v(" 插件(plugins")]),e._v(" "),s("p",[e._v("loader 被用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量。插件接口功能极其强大，可以用来处理各种各样的任务。")]),e._v(" "),s("h2",{attrs:{id:"webpack-的安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-的安装","aria-hidden":"true"}},[e._v("#")]),e._v(" webpack 的安装")]),e._v(" "),s("p",[e._v("请确保安装了 "),s("code",[e._v("Node.js")]),e._v(" 的最新版本。而且已经在您的项目根目录下已经初始化好了最基本的"),s("code",[e._v("package.json")]),e._v("文件")]),e._v(" "),s("h3",{attrs:{id:"本地安装-webpack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地安装-webpack","aria-hidden":"true"}},[e._v("#")]),e._v(" 本地安装 webpack")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ npm install --save-dev webpack\n\n# 如果你使用 webpack 4+ 版本，你还需要安装 CLI。\nnpm install --save-dev webpack-cli\n")])])]),s("p",[e._v("安装完成后，可以添加"),s("code",[e._v("npm")]),e._v("的"),s("code",[e._v("script")]),e._v("脚本")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('// package.json\n"scripts": {\n    "start": "webpack --config webpack.config.js"\n}\n')])])]),s("h3",{attrs:{id:"全局安装-webpack（不推荐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局安装-webpack（不推荐","aria-hidden":"true"}},[e._v("#")]),e._v(" 全局安装 webpack（不推荐)")]),e._v(" "),s("p",[e._v("将使 webpack 在全局环境下可用：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --global webpack\n")])])]),s("blockquote",[s("p",[e._v("注意：不推荐全局安装 webpack。这会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败。")])]),e._v(" "),s("h2",{attrs:{id:"快速入门完整-demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速入门完整-demo","aria-hidden":"true"}},[e._v("#")]),e._v(" 快速入门完整 demo")]),e._v(" "),s("ul",[s("li",[e._v("第一步：创建项目结构")])]),e._v(" "),s("p",[e._v("首先我们创建一个目录，初始化 npm，然后 在本地安装 webpack，接着安装 webpack-cli（此工具用于在命令行中运行 webpack）：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("mkdir webpack-demo && cd webpack-demo\nnpm init -y\nnpm install webpack webpack-cli --save-dev\n")])])]),s("p",[e._v("项目结构")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  webpack-demo\n+ |- package.json\n+ |- /dist\n+   |- index.html\n+ |- /src\n+   |- index.js\n")])])]),s("ul",[s("li",[e._v("第二步：安装 loadash 依赖和编写 js 文件")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save lodash\n")])])]),s("p",[e._v("编写：src/index.js 文件")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import _ from 'lodash';\n\nfunction createDomElement() {\n  var dom = document.createElement('div');\n  dom.innerHTML = _.join(['aicoder', '.com', ' wow'], '');\n  return dom;\n}\n\ndocument.body.appendChild(createDomElement());\n")])])]),s("p",[e._v("index.html")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <meta http-equiv="X-UA-Compatible" content="ie=edge">\n  <title>起步</title>\n</head>\n<body>\n  <script src="./main.js"><\/script>\n</body>\n</html>\n')])])]),s("ul",[s("li",[e._v("第三步：编写 webpack 配置文件")])]),e._v(" "),s("p",[e._v("根目录下添加 "),s("code",[e._v("webpack.config.js")]),e._v("文件。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  webpack-demo\n  |- package.json\n+ |- webpack.config.js\n  |- /dist\n    |- index.html\n  |- /src\n    |- index.js\n")])])]),s("p",[e._v("webpack.config.js 内容如下：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\n\nmodule.exports = {\n  mode: 'development',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.js',\n    path: path.resolve(__dirname, './dist')\n  }\n};\n")])])]),s("ul",[s("li",[e._v("执行构建任务")])]),e._v(" "),s("p",[e._v("直接执行构建任务：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npx webpack\n")])])]),s("p",[e._v("打开： dist/index.html 可以查看到页面的结果。")]),e._v(" "),s("h2",{attrs:{id:"加载非-js-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载非-js-文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 加载非 js 文件")]),e._v(" "),s("p",[e._v("webpack 最出色的功能之一就是，除了 JavaScript，还可以通过 loader 引入任何其他类型的文件")]),e._v(" "),s("h3",{attrs:{id:"加载-css-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载-css-文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 加载 CSS 文件")]),e._v(" "),s("ul",[s("li",[e._v("第一步： 安装 css 和 style 模块解析的依赖 "),s("code",[e._v("style-loader")]),e._v(" 和 "),s("code",[e._v("css-loader")])])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save-dev style-loader css-loader\n")])])]),s("ul",[s("li",[e._v("第二步： 添加 css 解析的 loader")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.resolve(__dirname, 'dist')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader', 'css-loader']\n      }\n    ]\n  }\n};\n")])])]),s("ul",[s("li",[s("code",[e._v("css-loader")]),e._v("： 辅助解析 js 中的 "),s("code",[e._v("import './main.css'")])]),e._v(" "),s("li",[s("code",[e._v("style-loader")]),e._v(": 把 js 中引入的 css 内容 注入到 html 标签中，并添加 style 标签.依赖 "),s("code",[e._v("css-loader")])])]),e._v(" "),s("blockquote",[s("p",[e._v("你可以在依赖于此样式的 js 文件中 导入样式文件，比如：import './style.css'。现在，当该 js 模块运行时，含有 CSS 字符串的 "),s("code",[e._v("<style>")]),e._v(" 标签，将被插入到 html 文件的 "),s("code",[e._v("<head>")]),e._v("中。")])]),e._v(" "),s("ul",[s("li",[e._v("第三步： 编写 css 文件和修改 js 文件")])]),e._v(" "),s("p",[e._v("在 src 目录中添加 "),s("code",[e._v("style.css")]),e._v("文件")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" webpack-demo\n  |- package.json\n  |- webpack.config.js\n  |- /dist\n    |- bundle.js\n    |- index.html\n  |- /src\n+   |- style.css\n    |- index.js\n  |- /node_modules\n")])])]),s("p",[e._v("src/style.css")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(".hello {\n  color: red;\n}\n")])])]),s("p",[e._v("修改 js 文件")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  import _ from 'lodash';\n+ import './style.css';\n\n  function createDomElement() {\n    let dom = document.createElement('div');\n    dom.innerHTML = _.join(['aicoder', '.com', ' wow'], '');\n+   dom.className = 'hello';\n    return dom;\n  }\n\n  document.body.appendChild(createDomElement());\n")])])]),s("p",[e._v("最后重新打开 dist 目录下的 index.html 看一下文字是否变成了红色的了。")]),e._v(" "),s("h3",{attrs:{id:"module-配置补充"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-配置补充","aria-hidden":"true"}},[e._v("#")]),e._v(" module 配置补充")]),e._v(" "),s("p",[e._v("模块(module): 这些选项决定了如何处理项目中的不同类型的模块。")]),e._v(" "),s("p",[e._v("webpack 模块可以支持如下:")]),e._v(" "),s("ul",[s("li",[e._v("ES2015 import 语句")]),e._v(" "),s("li",[e._v("CommonJS require() 语句")]),e._v(" "),s("li",[e._v("AMD define 和 require 语句")]),e._v(" "),s("li",[e._v("css/sass/less 文件中的 @import 语句。")]),e._v(" "),s("li",[e._v("样式"),s("code",[e._v("(url(...))")]),e._v("或 HTML 文件"),s("code",[e._v("(<img src=...>)")]),e._v("中的图片链接"),s("code",[e._v("(image url)")])])]),e._v(" "),s("h4",{attrs:{id:"module-noparse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-noparse","aria-hidden":"true"}},[e._v("#")]),e._v(" module.noParse")]),e._v(" "),s("p",[e._v("值的类型： RegExp | [RegExp] | function")]),e._v(" "),s("p",[e._v("防止 webpack 解析那些任何与给定正则表达式相匹配的文件。忽略的文件中不应该含有 import, require, define 的调用，或任何其他导入机制。忽略大型的 library 可以提高构建性能。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("module.exports = {\n  mode: 'devleopment',\n  entry: './src/index.js',\n  ...\n  module: {\n    noParse: /jquery|lodash/,\n    // 从 webpack 3.0.0 开始,可以使用函数，如下所示\n    // noParse: function(content) {\n    //   return /jquery|lodash/.test(content);\n    // }\n  }\n  ...\n};\n")])])]),s("h4",{attrs:{id:"module-rules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-rules","aria-hidden":"true"}},[e._v("#")]),e._v(" module.rules")]),e._v(" "),s("p",[e._v("创建模块时，匹配请求的规则数组。这些规则能够修改模块的创建方式。这些规则能够对模块(module)应用 loader，或者修改解析器(parser)。")]),e._v(" "),s("p",[e._v("创建模块时，匹配请求的规则数组。这些规则能够修改模块的创建方式。这些规则能够对模块(module)应用 loader，或者修改解析器(parser)。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("module.exports = {\n  ...\n  module: {\n    noParse: /jquery|lodash/,\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader', 'css-loader']\n      }\n    ]\n  }\n  ...\n};\n")])])]),s("h4",{attrs:{id:"module-rule"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-rule","aria-hidden":"true"}},[e._v("#")]),e._v(" module Rule")]),e._v(" "),s("p",[e._v("Rule 条件详解")]),e._v(" "),s("ul",[s("li",[e._v("字符串：匹配输入必须以提供的字符串开始。是的。目录绝对路径或文件绝对路径。")]),e._v(" "),s("li",[e._v("正则表达式：test 输入值。")]),e._v(" "),s("li",[e._v("函数：调用输入的函数，必须返回一个真值(truthy value)以匹配。")]),e._v(" "),s("li",[e._v("条件数组：至少一个匹配条件。")]),e._v(" "),s("li",[e._v("对象：匹配所有属性。每个属性都有一个定义行为。")])]),e._v(" "),s("h4",{attrs:{id:"rule-test"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rule-test","aria-hidden":"true"}},[e._v("#")]),e._v(" Rule.test")]),e._v(" "),s("ul",[s("li",[e._v("{ test: Condition }：匹配特定条件。一般是提供一个正则表达式或正则表达式的数组，但这不是强制的。")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("module.exports = {\n  ...\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: ['style-loader', 'css-loader']\n      }\n    ]\n  }\n  ...\n};\n")])])]),s("p",[e._v("其他的条件比如：")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("{ include: Condition }")]),e._v(":匹配特定条件。一般是提供一个字符串或者字符串数组，但这不是强制的。")]),e._v(" "),s("li",[s("code",[e._v("{ exclude: Condition }")]),e._v(":排除特定条件。一般是提供一个字符串或字符串数组，但这不是强制的。")]),e._v(" "),s("li",[s("code",[e._v("{ and: [Condition] }")]),e._v(":必须匹配数组中的所有条件")]),e._v(" "),s("li",[s("code",[e._v("{ or: [Condition] }")]),e._v(":匹配数组中任何一个条件")]),e._v(" "),s("li",[s("code",[e._v("{ not: [Condition] }")]),e._v(":必须排除这个条件")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("module.exports = {\n  ...\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        include: [\n          path.resolve(__dirname, \"app/styles\"),\n          path.resolve(__dirname, \"vendor/styles\")\n        ],\n        use: ['style-loader', 'css-loader']\n      }\n    ]\n  }\n  ...\n};\n")])])]),s("h4",{attrs:{id:"rule-use"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rule-use","aria-hidden":"true"}},[e._v("#")]),e._v(" Rule.use")]),e._v(" "),s("p",[e._v("应用于模块指定使用一个 loader。")]),e._v(" "),s("p",[e._v("Loaders can be chained by passing multiple loaders, which will be applied from right to left (last to first configured).")]),e._v(" "),s("p",[e._v("加载器可以链式传递，从右向左进行应用到模块上。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("use: [\n  'style-loader',\n  {\n    loader: 'css-loader'\n  },\n  {\n    loader: 'less-loader',\n    options: {\n      noIeCompat: true\n    }\n  }\n];\n")])])]),s("blockquote",[s("p",[e._v('传递字符串（如：use: [ "style-loader" ]）是 loader 属性的简写方式（如：use: [ { loader: "style-loader "} ]）。')])]),e._v(" "),s("h3",{attrs:{id:"加载-sass-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载-sass-文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 加载 Sass 文件")]),e._v(" "),s("p",[e._v("加载 Sass 需要"),s("code",[e._v("sass-loader")]),e._v("。")]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install sass-loader node-sass webpack --save-dev\n")])])]),s("p",[e._v("使用：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// webpack.config.js\nmodule.exports = {\n  ...\n  module: {\n    rules: [{\n      test: /\\.scss$/,\n      use: [{\n        loader: \"style-loader\"\n      }, {\n        loader: \"css-loader\"\n      }, {\n        loader: \"sass-loader\"\n      }]\n    }]\n  }\n};\n\n// a.scss\n$bgColor: pink;\n.box{\n    background-color: $bgColor;\n    font-size: 30px;\n}\n.test{\n    span {\n        color: greenyellow;\n    }\n}\n\n// index.js\nimport _ from 'lodash';\nimport './style.css';\n+ import './a.scss';\n\nfunction createDomElement() {\n  var dom = document.createElement('div');\n  dom.innerHTML = _.join(['aicoder', '.com', ' wow'], '');\n//   dom.className = 'hello';\n +  dom.classList.add('box');\n  return dom;\n}\n\ndocument.body.appendChild(createDomElement());\n")])])]),s("p",[e._v("为 sass 文件注入内容：")]),e._v(" "),s("p",[e._v("如果你要将 Sass 代码放在实际的入口文件(entry file)之前，可以设置 data 选项。此时 sass-loader 不会覆盖 data 选项，只会将它拼接在入口文件的内容之前。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n    loader: "sass-loader",\n    options: {\n        data: "$env: " + process.env.NODE_ENV + ";"\n    }\n}\n')])])]),s("blockquote",[s("p",[e._v("注意：由于代码注入, 会破坏整个入口文件的 source map。\b 通常一个简单的解决方案是，多个 Sass 文件入口。")])]),e._v(" "),s("h3",{attrs:{id:"创建-source-map"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建-source-map","aria-hidden":"true"}},[e._v("#")]),e._v(" 创建 Source Map")]),e._v(" "),s("p",[e._v("在调试中显示scss文件及行数")]),e._v(" "),s("p",[s("code",[e._v("css-loader")]),e._v("和"),s("code",[e._v("sass-loader")]),e._v("都可以通过该 options 设置启用 sourcemap。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('// webpack.config.js\nmodule.exports = {\n  ...\n  module: {\n    rules: [{\n      test: /\\.scss$/,\n      use: [{\n        loader: "style-loader"\n      }, {\n        loader: "css-loader",\n        options: {\n          sourceMap: true\n        }\n      }, {\n        loader: "sass-loader",\n        options: {\n          sourceMap: true\n        }\n      }]\n    }]\n  }\n};Copy to clipboardErrorCopied\n')])])]),s("h3",{attrs:{id:"postcss-处理-loader（附带：添加-css3-前缀）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#postcss-处理-loader（附带：添加-css3-前缀）","aria-hidden":"true"}},[e._v("#")]),e._v(" PostCSS 处理 loader（附带：添加 css3 前缀）")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://postcss.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PostCSS"),s("OutboundLink")],1),e._v("是一个 CSS 的预处理工具，可以帮助我们：给 CSS3 的属性添加前缀，样式格式校验（stylelint），提前使用 css 的新特性比如：表格布局，更重要的是可以实现 CSS 的模块化，防止 CSS 样式冲突。")]),e._v(" "),s("p",[e._v("我们常用的就是使用 PostCSS 进行添加前缀，以此为例：")]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm i -D postcss-loader\nnpm install autoprefixer --save-dev\n\n# 以下可以不用安装\n# cssnext可以让你写CSS4的语言，并能配合autoprefixer进行浏览器兼容的不全，而且还支持嵌套语法\n$ npm install postcss-cssnext --save-dev\n\n# 类似scss的语法，实际上如果只是想用嵌套的话有cssnext就够了\n$ npm install precss --save-dev\n\n# 在@import css文件的时候让webpack监听并编译\n$ npm install postcss-import --save-dev\nconst path = require('path');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nmodule.exports = {\n  mode: 'development',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.js',\n    path: path.resolve(__dirname, './dist')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          'style-loader',\n          {\n            loader: 'css-loader',\n            options: {\n              sourceMap: true\n            }\n          },\n          {\n            loader: 'postcss-loader',\n            options: {\n              ident: 'postcss',\n              sourceMap: true,\n              plugins: loader => [\n                require('autoprefixer')({ browsers: ['> 0.15% in CN'] }) // 添加前缀\n              ]\n            }\n          },\n          {\n            loader: 'sass-loader',\n            options: {\n              sourceMap: true\n            }\n          }\n        ]\n      }\n    ]\n  }\n};\n")])])]),s("h3",{attrs:{id:"样式表抽离成专门的单独文件并且设置版本号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#样式表抽离成专门的单独文件并且设置版本号","aria-hidden":"true"}},[e._v("#")]),e._v(" 样式表抽离成专门的单独文件并且设置版本号")]),e._v(" "),s("p",[e._v("首先以下的 css 的处理我们都把 mode 设置为 "),s("code",[e._v("production")]),e._v("。")]),e._v(" "),s("p",[e._v("webpack4 开始使用： "),s("code",[e._v("mini-css-extract-plugin")]),e._v("插件, 1-3 的版本可以用： "),s("code",[e._v("extract-text-webpack-plugin")])]),e._v(" "),s("blockquote",[s("p",[e._v("抽取了样式，就不能再用 "),s("code",[e._v("style-loader")]),e._v("注入到 html 中了。")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save-dev mini-css-extract-plugin\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// webpack.product.config.js\n// 部署模式\n\n// 最终部署模式文件\n// 单独抽取css\nconst path = require('path');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nmodule.exports = {\n    mode: 'production',\n    entry: './src/index.js',\n    output: {\n        filename: 'main.js',\n        path: path.resolve(__dirname, './dist')\n    },\n    module: {\n        rules: [{\n            test: /\\.(sa|sc|c)ss$/,\n            use: [\n                MiniCssExtractPlugin.loader,\n                {\n                    loader: \"css-loader\",\n                    options: {\n                        sourceMap: true\n                    }\n                },\n                {\n                    loader: 'postcss-loader',\n                    options: {\n                        ident: 'postcss',\n                        sourceMap: true,\n                        plugins: loader => [\n                            require('autoprefixer')({\n                                browsers: ['> 0.15% in CN'] // 浏览器范围，包含ie8\n                            }) // 添加前缀\n                        ]\n                    }\n                },\n                {\n                    loader: \"sass-loader\",\n                    options: {\n                        sourceMap: true\n                    }\n                }\n            ]\n        }]\n    },\n    plugins: [\n        new MiniCssExtractPlugin({\n            filename: '[name].[hash].css', // 设置最终输出的文件名\n            chunkFilename: '[id].css'\n        })\n    ]\n};\n")])])]),s("p",[e._v("再次运行打包：")]),e._v(" "),s("p",[e._v("npx webpack -h 查看帮助文档")]),e._v(" "),s("p",[e._v("npx webpack --config webpack.product.config.js")]),e._v(" "),s("p",[e._v("在 dist 目录中已经把 css 抽取到单独的一个 css 文件中了。修改 html，引入此 css 就能看到结果了。")]),e._v(" "),s("h3",{attrs:{id:"压缩-css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#压缩-css","aria-hidden":"true"}},[e._v("#")]),e._v(" 压缩 CSS")]),e._v(" "),s("p",[e._v("webpack5 貌似会内置 css 的压缩，webpack4 可以自己设置一个插件即可。")]),e._v(" "),s("p",[e._v("压缩 css 插件："),s("code",[e._v("optimize-css-assets-webpack-plugin")])]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm i -D optimize-css-assets-webpack-plugin\nconst path = require('path');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin');\nconst autoprefixer = require('autoprefixer');\n\nmodule.exports = {\n  mode: 'production',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.[hash].js',\n    path: path.resolve(__dirname, './dist')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          MiniCssExtractPlugin.loader,\n          {\n            loader: 'css-loader'\n          },\n          {\n            loader: 'postcss-loader',\n            options: {\n              ident: 'postcss',\n              plugins: loader => [autoprefixer({ browsers: ['> 0.15% in CN'] })]\n            }\n          },\n          {\n            loader: 'sass-loader'\n          }\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: '[name][hash].css',\n      chunkFilename: '[id][hash].css'\n    })\n  ],\n  optimization: {\n    minimizer: [new OptimizeCSSAssetsPlugin({})]\n  }\n};\n")])])]),s("h3",{attrs:{id:"js-压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-压缩","aria-hidden":"true"}},[e._v("#")]),e._v(" JS 压缩")]),e._v(" "),s("p",[e._v("压缩需要一个插件： "),s("code",[e._v("uglifyjs-webpack-plugin")]),e._v(", 此插件需要一个前提就是："),s("code",[e._v("mode: 'production'")]),e._v(".")]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm i -D uglifyjs-webpack-plugin\nconst path = require('path');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst UglifyJsPlugin = require('uglifyjs-webpack-plugin');\nconst OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin');\nconst autoprefixer = require('autoprefixer');\n\nmodule.exports = {\n  mode: 'production',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.[hash].js', // 重点！！！！\n    path: path.resolve(__dirname, './dist')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          MiniCssExtractPlugin.loader,\n          {\n            loader: 'css-loader'\n          },\n          {\n            loader: 'postcss-loader',\n            options: {\n              ident: 'postcss',\n              plugins: loader => [autoprefixer({ browsers: ['> 0.15% in CN'] })]\n            }\n          },\n          {\n            loader: 'sass-loader'\n          }\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: '[name][hash].css', // 重点\n      chunkFilename: '[id][hash].css'\n    })\n  ],\n  optimization: {\n    minimizer: [\n      new UglifyJsPlugin({\n        cache: true,\n        parallel: true,\n        sourceMap: true // set to true if you want JS source maps\n      }),\n      new OptimizeCSSAssetsPlugin({}) //压缩css\n    ]\n  }\n};\n")])])]),s("h3",{attrs:{id:"解决-css-文件或者-js-文件名字哈希变化的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决-css-文件或者-js-文件名字哈希变化的问题","aria-hidden":"true"}},[e._v("#")]),e._v(" 解决 CSS 文件或者 JS 文件名字哈希变化的问题")]),e._v(" "),s("p",[s("code",[e._v("HtmlWebpackPlugin")]),e._v("插件，可以把打包后的 CSS 或者 JS 文件引用直接注入到 HTML 模板中，这样就不用每次手动修改文件引用了。")]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save-dev html-webpack-plugin\nconst path = require('path');\n+ const HtmlWebpackPlugin = require('html-webpack-plugin');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst UglifyJsPlugin = require('uglifyjs-webpack-plugin');\nconst OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin');\nconst autoprefixer = require('autoprefixer');\n\nmodule.exports = {\n  mode: 'production',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.[hash].js',\n    path: path.resolve(__dirname, './dist')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          MiniCssExtractPlugin.loader,\n          {\n            loader: 'css-loader'\n          },\n          {\n            loader: 'postcss-loader',\n            options: {\n              ident: 'postcss',\n              plugins: loader => [autoprefixer({ browsers: ['> 0.15% in CN'] })]\n            }\n          },\n          {\n            loader: 'sass-loader'\n          }\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: '[name][hash].css',\n      chunkFilename: '[id][hash].css'\n    }),\n +   new HtmlWebpackPlugin({\n +     title: 'AICODER 全栈线下实习', // 默认值：Webpack App\n +     filename: 'main.html', // 默认值： 'index.html'\n +    template: path.resolve(__dirname, 'src/main.html'), // 注意是src下面的\n +     minify: {\n +       collapseWhitespace: true, // 是否移除空行\n +       removeComments: true, // 是否去掉注释\n +       removeAttributeQuotes: true // 移除属性的引号\n +     }\n +   })\n  ],\n  optimization: {\n    minimizer: [\n      new UglifyJsPlugin({\n        cache: true,\n        parallel: true,\n        sourceMap: true // set to true if you want JS source maps\n      }),\n      new OptimizeCSSAssetsPlugin({})\n    ]\n  }\n};\n")])])]),s("h3",{attrs:{id:"清理-dist-目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清理-dist-目录","aria-hidden":"true"}},[e._v("#")]),e._v(" 清理 dist 目录")]),e._v(" "),s("p",[e._v("每次构建，我们的 "),s("code",[e._v("/dist")]),e._v(" 文件夹都会保存生成的文件，然后就会非常杂乱。")]),e._v(" "),s("p",[e._v("通常，在每次构建前清理 "),s("code",[e._v("/dist")]),e._v(" 文件夹，是比较推荐的做法")]),e._v(" "),s("p",[s("code",[e._v("clean-webpack-plugin")]),e._v(" 是一个比较普及的管理插件，让我们安装和配置下。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install clean-webpack-plugin --save-dev\n")])])]),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  const path = require('path');\n  ....\n+ const CleanWebpackPlugin = require('clean-webpack-plugin');\n\n  module.exports = {\n    entry: {\n      app: './src/index.js',\n      print: './src/print.js'\n    },\n    plugins: [\n+     new CleanWebpackPlugin(['/dist'])\n      ...\n    ],\n    output: {\n      filename: '[name].bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    }\n    ...\n  };\n")])])]),s("p",[e._v("现在执行 "),s("code",[e._v("npm run build")]),e._v("，再检查 "),s("code",[e._v("/dist")]),e._v(" 文件夹。如果一切顺利，你现在应该不会再看到旧的文件，只有构建后生成的文件！")]),e._v(" "),s("p",[e._v("npm i clean-webpack-plugin@0.1.19 -D  装这个版本")]),e._v(" "),s("blockquote",[s("p",[s("em",[e._v("由于最新版本变化@2.0.1")]),e._v("之前的写法已经不能使用："),s("code",[e._v("new CleanWebpackPlugin(['/dist'])")]),e._v("。 官方文档地址："),s("a",{attrs:{href:"https://www.npmjs.com/package/clean-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.npmjs.com/package/clean-webpack-plugin"),s("OutboundLink")],1),e._v(" 可以直接设置一个对象参考： "),s("code",[e._v("new CleanWebpackPlugin({cleanOnceBeforeBuildPatterns: ['**/*', '!static-files*']})")])])]),e._v(" "),s("h3",{attrs:{id:"加载图片与图片优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载图片与图片优化","aria-hidden":"true"}},[e._v("#")]),e._v(" 加载图片与图片优化")]),e._v(" "),s("p",[e._v("在 css 文件或者 sass 文件中添加如下代码")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$red: #900;\n$size: 20px;\n\n.box {\n  height: 30px*2;\n  font-size: $size;\n  transform: translate3d( 0, 0, 0 );\n+ background: url('../static/1.jpeg')\n}Copy to clipboardErrorCopied\n")])])]),s("p",[e._v("运行打包发现如下错误：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ERROR in ./src/static/1.jpeg 1:0\nModule parse failed: Unexpected character '�' (1:0)\nYou may need an appropriate loader to handle this file type.Copy to clipboardErrorCopied\n")])])]),s("p",[e._v("解决方案："),s("code",[e._v("file-loader")]),e._v("处理文件的导入")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save-dev file-loader\n")])])]),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  const path = require('path');\n\n  module.exports = {\n    entry: './src/index.js',\n    output: {\n      filename: 'bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    },\n    module: {\n      rules: [\n        {\n          test: /\\.css$/,\n          use: [\n            'style-loader',\n            'css-loader'\n          ]\n        },\n+       {\n+         test: /\\.(png|svg|jpg|gif)$/,\n+         use: [\n+           'file-loader'\n+         ]\n+       }\n      ]\n    }\n  };Copy to clipboardErrorCopied\n")])])]),s("p",[e._v("此时运行打包，发现 dist 目录多了一个图片文件，另外报错不再出现。")]),e._v(" "),s("p",[e._v("那更进一步，图片如何进行优化呢？")]),e._v(" "),s("p",[s("code",[e._v("image-webpack-loader")]),e._v("可以帮助我们对图片进行压缩和优化。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install image-webpack-loader --save-dev\n")])])]),s("p",[e._v("使用：webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  const path = require('path');\n\n  module.exports = {\n    entry: './src/index.js',\n    output: {\n      filename: 'bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    },\n    module: {\n      rules: [\n        {\n          test: /\\.css$/,\n          use: [\n            'style-loader',\n            'css-loader'\n          ]\n        },\n        {\n          test: /\\.(png|svg|jpg|gif|jpeg|ico)$/,\n          use: [\n            'file-loader',\n+           {\n+             loader: 'image-webpack-loader',\n+             options: {\n+               mozjpeg: {\n+                 progressive: true,\n+                 quality: 65\n+               },\n+               optipng: {\n+                 enabled: false,\n+               },\n+               pngquant: {\n+                 quality: '65-90',\n+                 speed: 4\n+               },\n+               gifsicle: {\n+                 interlaced: false,\n+               },\n+               webp: {\n+                 quality: 75\n+               }\n+             }\n+           },\n          ]\n        }\n      ]\n    }\n  };Copy to clipboardErrorCopied\n")])])]),s("p",[e._v("此时在运行 webpack，发现会 生成的图片的大小会被压缩很多。")]),e._v(" "),s("h3",{attrs:{id:"更进一步处理图片成-base64"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更进一步处理图片成-base64","aria-hidden":"true"}},[e._v("#")]),e._v(" 更进一步处理图片成 base64")]),e._v(" "),s("p",[s("code",[e._v("url-loader")]),e._v("功能类似于 file-loader，可以把 url 地址对应的文件，打包成 base64 的 DataURL，提高访问的效率。")]),e._v(" "),s("p",[e._v("如何使用：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save-dev url-loader\n")])])]),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("module.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.(png|svg|jpg|gif|jpeg|ico|woff|woff2|eot|ttf|otf)$/,\n        use: [\n          {\n            loader: 'url-loader', // 根据图片大小，把图片优化成base64\n            options: {\n              limit: 10000\n            }\n          },\n          {\n            loader: 'image-webpack-loader', // 先进行图片优化\n            options: {\n              mozjpeg: {\n                progressive: true,\n                quality: 65\n              },\n              optipng: {\n                enabled: false\n              },\n              pngquant: {\n                quality: '65-90',\n                speed: 4\n              },\n              gifsicle: {\n                interlaced: false\n              },\n              webp: {\n                quality: 75\n              }\n            }\n          }\n        ]\n      }\n    ]\n  }\n};\n")])])]),s("h3",{attrs:{id:"字体的处理（同图片）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字体的处理（同图片）","aria-hidden":"true"}},[e._v("#")]),e._v(" 字体的处理（同图片）")]),e._v(" "),s("p",[e._v("由于 css 中可能引用到自定义的字体，处理也是跟图片一致。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\n\n  module.exports = {\n    entry: './src/index.js',\n    output: {\n      filename: 'bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    },\n    module: {\n      rules: [\n        {\n          test: /\\.css$/,\n          use: [\n            'style-loader',\n            'css-loader'\n          ]\n        },\n        {\n          test: /\\.(png|svg|jpg|gif)$/,\n          use: [\n            'file-loader'\n          ]\n        },\n+       {\n+         test: /\\.(woff|woff2|eot|ttf|otf)$/,\n+         use: [\n+           'file-loader'\n+         ]\n+       }\n      ]\n    }\n  };\n")])])]),s("h2",{attrs:{id:"开发相关辅助"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发相关辅助","aria-hidden":"true"}},[e._v("#")]),e._v(" 开发相关辅助")]),e._v(" "),s("h3",{attrs:{id:"合并两个webpack的js配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#合并两个webpack的js配置文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 合并两个webpack的js配置文件")]),e._v(" "),s("p",[e._v("开发环境(development)和生产环境(production)配置文件有很多不同点，但是也有一部分是相同的配置内容，如果在两个配置文件中都添加相同的配置节点， 就非常不爽。")]),e._v(" "),s("p",[s("code",[e._v("webpack-merge")]),e._v(" 的工具可以实现两个配置文件进合并，这样我们就可以把 开发环境和生产环境的公共配置抽取到一个公共的配置文件中。")]),e._v(" "),s("p",[e._v("安装：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save-dev webpack-merge\n")])])]),s("p",[e._v("例如：")]),e._v(" "),s("p",[e._v("project")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  webpack-demo\n  |- package.json\n- |- webpack.config.js \n+ |- webpack.common.js  公共\n+ |- webpack.dev.js  开发阶段\n+ |- webpack.prod.js  生产阶段\n  |- /dist\n  |- /src\n    |- index.js\n    |- math.js\n  |- /node_modules\n")])])]),s("p",[e._v("webpack.common.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\n\nmodule.exports = {\n  entry: './src/index.js',\n  module: {\n    rules: [\n      {\n        test: /\\.(png|svg|jpg|gif|jpeg|ico|woff|woff2|eot|ttf|otf)$/,\n        use: [{\n            loader: 'url-loader', // 根据图片大小，把图片优化成base64\n            options: {\n              limit: 10000\n            }\n          },\n          {\n            loader: 'image-webpack-loader', // 先进行图片优化\n            options: {\n              mozjpeg: {\n                progressive: true,\n                quality: 65\n              },\n              optipng: {\n                enabled: false\n              },\n              pngquant: {\n                quality: '65-90',\n                speed: 4\n              },\n              gifsicle: {\n                interlaced: false\n              },\n              webp: {\n                quality: 75\n              }\n            }\n          }\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      title: 'AICODER 全栈线下实习', // 默认值：Webpack App\n      filename: 'main.html', // 默认值： 'index.html'\n      template: path.resolve(__dirname, 'src/main.html'),\n      minify: {\n        collapseWhitespace: true,\n        removeComments: true,\n        removeAttributeQuotes: true // 移除属性的引号\n      }\n    }),\n    new CleanWebpackPlugin(['dist']) // 清除dist\n  ]\n};\n")])])]),s("p",[e._v("webpack.dev.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\nconst merge = require('webpack-merge');\nconst common = require('./webpack.common.js');\n\nlet devConfig = {\n    mode: 'production',\n    output: {\n        filename: 'main.[hash].js',\n        path: path.resolve(__dirname, './dist')\n    },\n    module: {\n        rules: [{\n            test: /\\.(sa|sc|c)ss$/,\n            use: [\n                'style-loader',\n                {\n                    loader: 'css-loader',\n                    options: {\n                        sourceMap: true\n                    }\n                },\n                {\n                    loader: 'postcss-loader',\n                    options: {\n                        ident: 'postcss',\n                        sourceMap: true,\n                        plugins: loader => [require('autoprefixer')({\n                            overrideBrowserslist: ['> 0.15% in CN']\n                        })]\n                    }\n                },\n                {\n                    loader: 'sass-loader',\n                    options: {\n                        sourceMap: true\n                    }\n                }\n            ]\n        }]\n    }\n};\n\nmodule.exports = merge(common, devConfig)\n")])])]),s("p",[e._v("webpack.prod.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\n\nconst UglifyJsPlugin = require('uglifyjs-webpack-plugin');\nconst OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin');\n\nconst merge = require('webpack-merge');\nconst common = require('./webpack.common.js');\n\nlet prodConfig = module.exports = {\n    mode: 'production',\n    entry: './src/index.js',\n    output: {\n        filename: 'main.[hash].js',\n        path: path.resolve(__dirname, './dist')\n    },\n    module: {\n        rules: [{\n            test: /\\.(sa|sc|c)ss$/,\n            use: [\n                'style-loader',\n                {\n                    loader: 'css-loader'\n                },\n                {\n                    loader: 'postcss-loader',\n                    options: {\n                        ident: 'postcss',\n                        plugins: loader => [require('autoprefixer')({\n                            overrideBrowserslist: ['> 0.15% in CN']\n                        })]\n                    }\n                },\n                {\n                    loader: 'sass-loader'\n                }\n            ]\n        }]\n    },\n    plugins: [\n        new MiniCssExtractPlugin({\n            filename: '[name][hash].css',\n            chunkFilename: '[id][hash].css'\n        })\n    ],\n    optimization: {\n        minimizer: [\n            new UglifyJsPlugin({\n                cache: true,\n                parallel: true,\n                sourceMap: true // 如果需要JS源映射，请设置为true\n            }),\n            new OptimizeCSSAssetsPlugin({})\n        ]\n    }\n};\n\nmodule.exports = merge(common, prodConfig)\n")])])]),s("h3",{attrs:{id:"js-使用-source-map"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-使用-source-map","aria-hidden":"true"}},[e._v("#")]),e._v(" js 使用 source map")]),e._v(" "),s("p",[e._v("当 webpack 打包源代码时，可能会很难追踪到错误和警告在源代码中的原始位置。例如，如果将三个源文件（a.js, b.js 和 c.js）打包到一个 bundle（bundle.js）中，而其中一个源文件包含一个错误，那么堆栈跟踪就会简单地指向到 bundle.js。")]),e._v(" "),s("p",[e._v("使用 "),s("code",[e._v("inline-source-map")]),e._v(" 选项，这有助于解释说明 js 原始出错的位置。（"),s("strong",[e._v("不要用于生产环境")]),e._v("）：")]),e._v(" "),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  const path = require('path');\n  const HtmlWebpackPlugin = require('html-webpack-plugin');\n  const CleanWebpackPlugin = require('clean-webpack-plugin');\n\n  module.exports = {\n    entry: {\n      app: './src/index.js',\n      print: './src/print.js'\n    },\n+   devtool: 'inline-source-map',\n    plugins: [\n      new CleanWebpackPlugin(['dist']),\n      new HtmlWebpackPlugin({\n        title: 'Development'\n      })\n    ],\n    output: {\n      filename: '[name].bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    }\n  };Copy to clipboardErrorCopied\n")])])]),s("p",[s("img",{attrs:{src:"https://malun666.github.io/aicoder_vip_doc/images/webpackinline.png",alt:"inline-source-map"}})]),e._v(" "),s("h3",{attrs:{id:"监控文件变化，自动编译。使用观察模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监控文件变化，自动编译。使用观察模式","aria-hidden":"true"}},[e._v("#")]),e._v(" 监控文件变化，自动编译。使用观察模式")]),e._v(" "),s("p",[e._v("每次修改完毕后，都手动编译异常痛苦。最简单解决的办法就是启动"),s("code",[e._v("watch")]),e._v("。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npx webpack --watch\n")])])]),s("p",[e._v("当然可以添加到 npm 的 script 中")]),e._v(" "),s("p",[e._v("package.json")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n    "name": "development",\n    "version": "1.0.0",\n    "description": "",\n    "main": "webpack.config.js",\n    "scripts": {\n     \t"test": "echo \\"Error: no test specified\\" && exit 1",\n    \t"dev": "npx webpack --config webpack.dev.js",\n    \t"watch": "npx webpack --watch --config webpack.dev.js",\n    \t"build": "npx webpack --config webpack.prod.js"\n    },\n    "devDependencies": {\n      "clean-webpack-plugin": "^0.1.16",\n      "css-loader": "^0.28.4",\n      "csv-loader": "^2.1.1",\n      "file-loader": "^0.11.2",\n      "html-webpack-plugin": "^2.29.0",\n      "style-loader": "^0.18.2",\n      "webpack": "^3.0.0",\n      "xml-loader": "^1.2.1"\n    }\n  }Copy to clipboardErrorCopied\n')])])]),s("p",[e._v("但是有个 bug，就是每次我们修改 js 或者 css 文件后，要看到修改后的 html 的变化，需要我自己重新刷新页面。")]),e._v(" "),s("p",[e._v("如何能不刷新页面，自动更新变化呢？")]),e._v(" "),s("h3",{attrs:{id:"使用-webpack-dev-server-和热更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-webpack-dev-server-和热更新","aria-hidden":"true"}},[e._v("#")]),e._v(" 使用 webpack-dev-server 和热更新")]),e._v(" "),s("p",[e._v("webpack-dev-server 为你提供了一个简单的 web 服务器，并且能够实时重新加载(live reloading)。")]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save-dev webpack-dev-server\n")])])]),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  const path = require('path');\n  const HtmlWebpackPlugin = require('html-webpack-plugin');\n  const CleanWebpackPlugin = require('clean-webpack-plugin');\n\n  module.exports = {\n    entry: {\n      app: './src/index.js',\n      print: './src/print.js'\n    },\n    devtool: 'inline-source-map',\n+   devServer: {\n+     contentBase: './dist'\n+   },\n    plugins: [\n      new CleanWebpackPlugin(['dist']),\n      new HtmlWebpackPlugin({\n        title: 'Development'\n      })\n    ],\n    output: {\n      filename: '[name].bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    }\n  };Copy to clipboardErrorCopied\n")])])]),s("p",[e._v("启动此 webserver：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("webpack-dev-server --open\n")])])]),s("p",[s("a",{attrs:{href:"https://webpack.docschina.org/configuration/dev-server/",target:"_blank",rel:"noopener noreferrer"}},[e._v("官网其他配置"),s("OutboundLink")],1),e._v("：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('devServer: {\n  clientLogLevel: \'warning\', // 可能的值有 none, error, warning 或者 info（默认值)\n  hot: true,  // 启用 webpack 的模块热替换特性, 这个需要配合： webpack.HotModuleReplacementPlugin插件\n  contentBase:  path.join(__dirname, "dist"), // 告诉服务器从哪里提供内容， 默认情况下，将使用当前工作目录作为提供内容的目录\n  compress: true, // 一切服务都启用gzip 压缩\n  host: \'0.0.0.0\', // 指定使用一个 host。默认是 localhost。如果你希望服务器外部可访问 0.0.0.0\n  port: 8080, // 端口\n  open: true, // 是否打开浏览器\n  overlay: {  // 出现错误或者警告的时候，是否覆盖页面线上错误消息。\n    warnings: true,\n    errors: true\n  },\n  publicPath: \'/\', // 此路径下的打包文件可在浏览器中访问。\n  proxy: {  // 设置代理\n    "/api": {  // 访问api开头的请求，会跳转到  下面的target配置\n      target: "http://192.168.0.102:8080",\n      pathRewrite: {"^/api" : "/mockjsdata/5/api"}\n    }\n  },\n  quiet: true, // necessary for FriendlyErrorsPlugin. 启用 quiet 后，除了初始启动信息之外的任何内容都不会被打印到控制台。这也意味着来自 webpack 的错误或警告在控制台不可见。\n  watchOptions: { // 监视文件相关的控制选项\n    poll: true,   // webpack 使用文件系统(file system)获取文件改动的通知。在某些情况下，不会正常工作。例如，当使用 Network File System (NFS) 时。Vagrant 也有很多问题。在这些情况下，请使用轮询. poll: true。当然 poll也可以设置成毫秒数，比如：  poll: 1000\n    ignored: /node_modules/, // 忽略监控的文件夹，正则\n    aggregateTimeout: 300 // 默认值，当第一个文件更改，会在重新构建前增加延迟\n  }\n}\n')])])]),s("p",[e._v("如何启用热更新呢？")]),e._v(" "),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  const path = require('path');\n  const HtmlWebpackPlugin = require('html-webpack-plugin');\n  const CleanWebpackPlugin = require('clean-webpack-plugin');\n+ const webpack = require('webpack');\n\n  module.exports = {\n    entry: {\n       app: './src/index.js'\n    },\n    devtool: 'inline-source-map',\n    devServer: {\n      contentBase: './dist',\n+     hot: true\n    },\n    plugins: [\n      new CleanWebpackPlugin(['dist']),\n      new HtmlWebpackPlugin({\n        title: 'Hot Module Replacement'\n      }),\n+     new webpack.NamedModulesPlugin(),  // 更容易查看(patch)的依赖\n+     new webpack.HotModuleReplacementPlugin()  // 替换插件\n    ],\n    output: {\n      filename: '[name].bundle.js',\n      path: path.resolve(__dirname, 'dist')\n    }\n  };\n")])])]),s("p",[e._v("注意：配置入口文件时改成index.html")]),e._v(" "),s("h3",{attrs:{id:"js启用babel转码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js启用babel转码","aria-hidden":"true"}},[e._v("#")]),e._v(" JS启用babel转码")]),e._v(" "),s("p",[e._v("虽然现代的浏览器已经兼容了96%以上的ES6的语法了，但是为了兼容老式的浏览器（IE8、9）我们需要把最新的ES6的语法转成ES5的。那么"),s("code",[e._v("babel")]),e._v("的loader就出场了。")]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm i -D babel-loader babel-core babel-preset-env\n\n注意：npm i babel-loader@7 -D\n")])])]),s("p",[e._v("用法")]),e._v(" "),s("p",[e._v("在webpack的配置文件中，添加js的处理模块。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("module: {\n  rules: [\n    {\n      test: /\\.js$/,\n      exclude: /(node_modules)/,  // 加快编译速度，不包含node_modules文件夹内容\n      use: {\n        loader: 'babel-loader'\n      }\n    }\n  ]\n}\n")])])]),s("p",[e._v("然后，在项目根目录下，添加babel的配置文件 "),s("code",[e._v(".babelrc")]),e._v(".")]),e._v(" "),s("p",[s("code",[e._v(".babelrc")]),e._v("文件如下：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n  "presets": ["env"]\n}\n')])])]),s("p",[e._v("最后，在入口js文件中，添加ES6的❤新语法：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("class Temp {\n  show() {\n    console.log('this.Age :', this.Age);\n  }\n  get Age() {\n    return this._age;\n  }\n  set Age(val) {\n    this._age = val + 1;\n  }\n}\n\nlet t = new Temp();\nt.Age = 19;\n\nt.show();\n")])])]),s("p",[e._v("最后打包：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npx webpack\n")])])]),s("p",[e._v("最终打包后的js代码：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("var a = 1,\n    b = 3,\n    c = 9;\n\nconsole.log('a :', a);\nconsole.log('b :', b);\nconsole.log('c :', c);\n\nvar Temp = function () {\n  function Temp() {\n    _classCallCheck(this, Temp);\n  }\n\n  _createClass(Temp, [{\n    key: 'show',\n    value: function show() {\n      console.log('this.Age :', this.Age);\n    }\n  }, {\n    key: 'Age',\n    get: function get() {\n      return this._age;\n    },\n    set: function set(val) {\n      this._age = val + 1;\n    }\n  }]);\n\n  return Temp;\n}();\n\nvar t = new Temp();\nt.Age = 19;\n\nt.show();\n")])])]),s("h3",{attrs:{id:"babel优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel优化","aria-hidden":"true"}},[e._v("#")]),e._v(" Babel优化")]),e._v(" "),s("p",[e._v("babel-loader可以配置如下几个options：")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("cacheDirectory")]),e._v("：默认值为 false。当有设置时，指定的目录将用来缓存 loader 的执行结果。之后的 webpack 构建，将会尝试读取缓存，来避免在每次执行时，可能产生的、高性能消耗的 Babel 重新编译过程(recompilation process)。如果设置了一个空值 (loader: 'babel-loader?cacheDirectory') 或者 true (loader: babel-loader?cacheDirectory=true)，loader 将使用默认的缓存目录 node_modules/.cache/babel-loader，如果在任何根目录下都没有找到 node_modules 目录，将会降级回退到操作系统默认的临时文件目录。")]),e._v(" "),s("li",[s("code",[e._v("cacheIdentifier")]),e._v("：默认是一个由 babel-core 版本号，babel-loader 版本号，.babelrc 文件内容（存在的情况下），环境变量 BABEL_ENV 的值（没有时降级到 NODE_ENV）组成的字符串。可以设置为一个自定义的值，在 identifier 改变后，强制缓存失效。")]),e._v(" "),s("li",[s("code",[e._v("forceEnv")]),e._v("：默认将解析 BABEL_ENV 然后是 NODE_ENV。允许你在 loader 级别上覆盖 BABEL_ENV/NODE_ENV。对有不同 babel 配置的，客户端和服务端同构应用非常有用。")])]),e._v(" "),s("blockquote",[s("p",[e._v("注意：sourceMap 选项是被忽略的。当 webpack 配置了 sourceMap 时（通过 devtool 配置选项），将会自动生成 sourceMap。")])]),e._v(" "),s("p",[e._v("babel 在每个文件都插入了辅助代码，使代码体积过大.babel 对一些公共方法使用了非常小的辅助代码，比如 _extend。 默认情况下会被添加到每一个需要它的文件中。你可以引入 "),s("code",[e._v("babel runtime")]),e._v(" 作为一个独立模块，来避免重复引入。")]),e._v(" "),s("p",[e._v("安装：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install babel-plugin-transform-runtime --save-dev\nnpm install babel-runtime --save\n")])])]),s("p",[e._v("配置：")]),e._v(" "),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rules: [\n  // 'transform-runtime' 插件告诉 babel 要引用 runtime 来代替注入。\n  {\n    test: /\\.js$/,\n    exclude: /(node_modules|bower_components)/,\n    use: {\n      loader: 'babel-loader',\n    }\n  }\n]\n")])])]),s("p",[e._v("修改"),s("code",[e._v(".babelrc")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n  "presets": ["env"],\n  "plugins": [\n    ["transform-runtime", {\n      "helpers": true,\n      "polyfill": true,\n      "regenerator": true,\n      "moduleName": "babel-runtime"\n    }]\n  ]\n}\n')])])]),s("p",[e._v("此时，webpack打包的时候，会自动优化重复引入公共方法的问题。")]),e._v(" "),s("h3",{attrs:{id:"eslint校验代码格式规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eslint校验代码格式规范","aria-hidden":"true"}},[e._v("#")]),e._v(" ESLint校验代码格式规范")]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install eslint --save-dev\nnpm install eslint-loader --save-dev\n\n# 以下是用到的额外的需要安装的eslint的解释器、校验规则等\nnpm i -D babel-eslint standard\n")])])]),s("p",[e._v("使用")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('// webpack.config.js\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /node_modules/,\n        loader: "eslint-loader",\n        options: {\n          // eslint options (if necessary)\n          fix: true\n        }\n      },\n    ],\n  },\n  // ...\n}\n\n即：\n{\n    test: /\\.js$/,\n    exclude: /(node_modules|bower_components)/,\n    use: [{\n            loader: \'babel-loader\',\n        },\n        {\n            loader: "eslint-loader",\n            options: {\n            // eslint options (if necessary)\n            fix: true\n        }\n      }\n    ]\n }\n')])])]),s("p",[e._v("eslint配置可以直接放到webpack的配置文件中，也可以直接放到项目根目录的 "),s("code",[e._v(".eslintrc")]),e._v("中"),s("a",{attrs:{href:"https://eslint.org/docs/developer-guide/nodejs-api#cliengine",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),s("OutboundLink")],1),e._v("。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// .eslintrc.js\n// https://eslint.org/docs/user-guide/configuring\nmodule.exports = {\n  root: true,\n  parserOptions: {\n    parser: 'babel-eslint'\n  },\n  env: {\n    browser: true\n  },\n  extends: [\n    // https://github.com/standard/standard/blob/master/docs/RULES-en.md\n    'standard'\n  ],\n  globals: {\n    NODE_ENV: false\n  },\n  rules: {\n    // allow async-await\n    'generator-star-spacing': 'off',\n    // allow debugger during development\n    'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off',\n    // 添加，分号必须\n    semi: ['error', 'always'],\n    'no-unexpected-multiline': 'off',\n    'space-before-function-paren': ['error', 'never'],\n    // 'quotes': [\"error\", \"double\", { \"avoidEscape\": true }]\n    quotes: [\n      'error',\n      'single',\n      {\n        avoidEscape: true\n      }\n    ]\n  }\n};\n")])])]),s("p",[e._v("设置eslint忽略的文件，同时vsCode安装eslint插件")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("根目录下新建.eslintignore文件：\n/dist/\n/node_modules/\n/*.js\n")])])]),s("p",[e._v("此时eslint的配置就结束了。")]),e._v(" "),s("h3",{attrs:{id:"到此为止，一个完整的开发阶段的webpack的配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#到此为止，一个完整的开发阶段的webpack的配置文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 到此为止，一个完整的开发阶段的webpack的配置文件")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst autoprefixer = require('autoprefixer');\nconst webpack = require('webpack');\n\nmodule.exports = {\n  mode: 'development',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.js',\n    path: path.resolve(__dirname, './dist')\n  },\n  devtool: 'inline-source-map',\n  devServer: {\n    clientLogLevel: 'warning', // 可能的值有 none, error, warning 或者 info（默认值)\n    hot: true, // 启用 webpack 的模块热替换特性, 这个需要配合： webpack.HotModuleReplacementPlugin插件\n    contentBase: path.join(__dirname, \"dist\"), // 告诉服务器从哪里提供内容， 默认情况下，将使用当前工作目录作为提供内容的目录\n    compress: true, // 一切服务都启用gzip 压缩\n    host: '0.0.0.0', // 指定使用一个 host。默认是 localhost。如果你希望服务器外部可访问 0.0.0.0\n    port: 8085, // 端口\n    open: true, // 是否打开浏览器\n    overlay: { // 出现错误或者警告的时候，是否覆盖页面线上错误消息。\n      warnings: true,\n      errors: true\n    },\n    publicPath: '/', // 此路径下的打包文件可在浏览器中访问。\n    proxy: { // 设置代理\n      \"/api\": { // 访问api开头的请求，会跳转到  下面的target配置\n        target: \"http://192.168.0.102:8080\",\n        pathRewrite: {\n          \"^/api\": \"/mockjsdata/5/api\"\n        }\n      }\n    },\n    quiet: true, // necessary for FriendlyErrorsPlugin. 启用 quiet 后，除了初始启动信息之外的任何内容都不会被打印到控制台。这也意味着来自 webpack 的错误或警告在控制台不可见。\n    watchOptions: { // 监视文件相关的控制选项\n      poll: true, // webpack 使用文件系统(file system)获取文件改动的通知。在某些情况下，不会正常工作。例如，当使用 Network File System (NFS) 时。Vagrant 也有很多问题。在这些情况下，请使用轮询. poll: true。当然 poll也可以设置成毫秒数，比如：  poll: 1000\n      ignored: /node_modules/, // 忽略监控的文件夹，正则\n      aggregateTimeout: 300 // 默认值，当第一个文件更改，会在重新构建前增加延迟\n    }\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /(node_modules)/, // 加快编译速度，不包含node_modules文件夹内容\n        use: [{\n          loader: 'babel-loader'\n        },{\n          loader: 'eslint-loader',\n          options: {\n            fix: true\n          }\n        }]\n      },\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          'style-loader', {\n            loader: 'css-loader',\n            options: {\n              sourceMap: true\n            }\n          }, {\n            loader: 'postcss-loader',\n            options: {\n              ident: 'postcss',\n              sourceMap: true,\n              plugins: (loader) => [autoprefixer({browsers: ['> 0.15% in CN']})]\n            }\n          }, {\n            loader: 'sass-loader',\n            options: {\n              sourceMap: true\n            }\n          }\n        ]\n      }, {\n        test: /\\.(woff|woff2|eot|ttf|otf)$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 10000\n            }\n          }\n        ]\n      }, {\n        test: /\\.(png|svg|jpg|gif|jpeg|ico)$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 10000\n            }\n          }, {\n            loader: 'image-webpack-loader',\n            options: {\n              mozjpeg: {\n                progressive: true,\n                quality: 65\n              },\n              optipng: {\n                enabled: false\n              },\n              pngquant: {\n                quality: '65-90',\n                speed: 4\n              },\n              gifsicle: {\n                interlaced: false\n              },\n              webp: {\n                quality: 75\n              }\n            }\n          }\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new MiniCssExtractPlugin({filename: '[name].css', chunkFilename: '[id].css'}),\n    new CleanWebpackPlugin(['dist']),\n    new webpack.NamedModulesPlugin(), // 更容易查看(patch)的依赖\n    new webpack.HotModuleReplacementPlugin(), // 替换插件\n    new HtmlWebpackPlugin({\n      title: 'AICODER 全栈线下实习', // 默认值：Webpack App\n      filename: 'index.html', // 默认值： 'index.html'\n      minify: {\n        collapseWhitespace: true,\n        removeComments: true,\n        removeAttributeQuotes: true, // 移除属性的引号\n      },\n      template: path.resolve(__dirname, 'src/index.html')\n    })\n  ],\n  optimization: {}\n};\n\n")])])]),s("p",[e._v("用于生产环境的配置")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("const path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst MiniCssExtractPlugin = require(\"mini-css-extract-plugin\");\nconst UglifyJsPlugin = require(\"uglifyjs-webpack-plugin\");\nconst OptimizeCSSAssetsPlugin = require(\"optimize-css-assets-webpack-plugin\");\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst autoprefixer = require('autoprefixer');\n\nmodule.exports = {\n  mode: 'production',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.[hash].js',\n    path: path.resolve(__dirname, './dist')\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /(node_modules)/, // 加快编译速度，不包含node_modules文件夹内容\n        use: [{\n          loader: 'babel-loader'\n        },{\n          loader: 'eslint-loader',\n          options: {\n            fix: true\n          }\n        }]\n      },\n      {\n        test: /\\.(sa|sc|c)ss$/,\n        use: [\n          MiniCssExtractPlugin.loader, {\n            loader: 'css-loader'\n          }, {\n            loader: 'postcss-loader',\n            options: {\n              ident: 'postcss',\n              plugins: (loader) => [autoprefixer({browsers: ['> 0.15% in CN']})]\n            }\n          }, {\n            loader: 'sass-loader'\n          }\n        ]\n      }, {\n        test: /\\.(woff|woff2|eot|ttf|otf)$/,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 10000\n            }\n          }\n        ]\n      }, {\n        test: /\\.(png|svg|jpg|gif|jpeg|ico)$/,\n        use: [\n          'file-loader', {\n            loader: 'image-webpack-loader',\n            options: {\n              mozjpeg: {\n                progressive: true,\n                quality: 65\n              },\n              optipng: {\n                enabled: false\n              },\n              pngquant: {\n                quality: '65-90',\n                speed: 4\n              },\n              gifsicle: {\n                interlaced: false\n              },\n              webp: {\n                quality: 75\n              }\n            }\n          }\n        ]\n      }\n    ]\n  },\n  plugins: [\n    new MiniCssExtractPlugin({filename: '[name][hash].css', chunkFilename: '[id][hash].css'}),\n    new CleanWebpackPlugin(['dist']),\n    new HtmlWebpackPlugin({\n      title: 'AICODER 全栈线下实习', // 默认值：Webpack App\n      filename: 'index.html', // 默认值： 'index.html'\n      template: path.resolve(__dirname, 'src/index.html'),\n      minify: {\n        collapseWhitespace: true,\n        removeComments: true,\n        removeAttributeQuotes: true, // 移除属性的引号\n      }\n    })\n  ],\n  optimization: {\n    minimizer: [\n      new UglifyJsPlugin({\n        cache: true, parallel: true, sourceMap: true // set to true if you want JS source maps\n      }),\n      new OptimizeCSSAssetsPlugin({})\n    ]\n  }\n};\n")])])]),s("h2",{attrs:{id:"解析-resolve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解析-resolve","aria-hidden":"true"}},[e._v("#")]),e._v(" 解析(resolve)")]),e._v(" "),s("p",[e._v("配置模块如何解析。比如： "),s("code",[e._v("import _ from 'lodash'")]),e._v(" ,其实是加载解析了lodash.js文件。此配置就是设置加载和解析的方式。")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("resolve.alias")])])]),e._v(" "),s("p",[e._v("创建 import 或 require 的别名，来确保模块引入变得更简单。例如，一些位于 src/ 文件夹下的常用模块：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// webpack.config.js\nmodule.exports = {\n  mode: 'production',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.[hash].js',\n    path: path.resolve(__dirname, './dist')\n  },\n+ resolve: {\n+   alias: {\n+     vue$: path.resolve(__dirname, 'src/lib/vue/dist/vue.esm.js'),\n+     '@': path.resolve(__dirname, 'src/')\n+   }\n+ }\n  ...\n}\n\n// index.js\n// 在我们的index.js文件中，就可以直接import\nimport vue from 'vue';\n// 等价于\nimport vue from  'src/lib/vue/dist/vue.esm.js';\n\n")])])]),s("ul",[s("li",[s("code",[e._v("resolve.extensions")]),e._v("的应用")])]),e._v(" "),s("p",[e._v("自动解析确定的扩展。")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// webpack.config.js\nmodule.exports = {\n  mode: 'production',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.[hash].js',\n    path: path.resolve(__dirname, './dist')\n  },\n  resolve: {\n    alias: {\n      vue$: path.resolve(__dirname, 'src/lib/vue/dist/vue.esm.js'),\n      '@': path.resolve(__dirname, 'src/')\n    },\n+   extensions: [\".js\", \".vue\",\".json\"]   // 默认值: [\".js\",\".json\"]配置模块可以省略的后缀名\n  }\n  ...\n}\n")])])]),s("blockquote",[s("p",[e._v("给定对象的键后的末尾添加 $，以表示精准匹配")])]),e._v(" "),s("h2",{attrs:{id:"外部扩展-externals"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#外部扩展-externals","aria-hidden":"true"}},[e._v("#")]),e._v(" 外部扩展(externals)")]),e._v(" "),s("p",[e._v("externals 配置选项提供了「从输出的 bundle 中排除依赖」的方法。 "),s("a",{attrs:{href:"https://webpack.docschina.org/configuration/externals/",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("例如，从 CDN 引入 jQuery，而不是把它打包：")]),e._v(" "),s("p",[e._v("index.html")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<script\n  src="https://code.jquery.com/jquery-3.1.0.js"\n  integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="\n  crossorigin="anonymous">\n<\/script>\n')])])]),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// webpack.config.js\nmodule.exports = {\n  mode: 'production',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.[hash].js',\n    path: path.resolve(__dirname, './dist')\n  },\n  alias: {\n    extensions: [\".js\", \".vue\",\".json\"]   // 默认值: [\".js\",\".json\"]\n    vue$: path.resolve(__dirname, 'src/lib/vue/dist/vue.esm.js'),\n    '@': path.resolve(__dirname, 'src/')\n  },\n+ externals: {\n+   jquery: 'jQuery'\n+ },\n  ...\n}\n\n\n即：\nresolve: {\n        alias: {\n            vue$: path.resolve(__dirname, 'src/lib/vue/dist/vue.esm.js'),\n            '@': path.resolve(__dirname, 'src/')\n        },\n        extensions: [\".js\", \".vue\", \".json\"] // 默认值: [\".js\",\".json\"]\n    },\n    externals: {\n        jquery: 'jQuery'\n    },\n")])])]),s("p",[e._v("这样就剥离了那些不需要改动的依赖模块，换句话，下面展示的代码还可以正常运行：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("import $ from 'jquery';\n\n$('.my-element').animate(...);\n")])])]),s("p",[e._v("具有外部依赖(external dependency)的 bundle 可以在各种模块上下文(module context)中使用，例如 CommonJS, AMD, 全局变量和 ES2015 模块。外部 library 可能是以下任何一种形式：")]),e._v(" "),s("ul",[s("li",[e._v("root：可以通过一个全局变量访问 library（例如，通过 script 标签）。")]),e._v(" "),s("li",[e._v("commonjs：可以将 library 作为一个 CommonJS 模块访问。")]),e._v(" "),s("li",[e._v("commonjs2：和上面的类似，但导出的是 module.exports.default.")]),e._v(" "),s("li",[e._v("amd：类似于 commonjs，但使用 AMD 模块系统。")])]),e._v(" "),s("p",[e._v("不同的配置方式：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('externals : {\n  react: \'react\'\n}\n\n// 或者\n\nexternals : {\n  lodash : {\n    commonjs: "lodash",\n    amd: "lodash",\n    root: "_" // 指向全局变量\n  }\n}\n\n// 或者\n\nexternals : {\n  subtract : {\n    root: ["math", "subtract"]   // 相当于： window.math.substract\n  }\n}\n')])])]),s("p",[s("a",{attrs:{href:"https://malun666.github.io/aicoder_vip_doc/#/pages/vip_2webpack?id=%e6%9e%84%e5%bb%ba%e7%9b%ae%e6%a0%87targets",target:"_blank",rel:"noopener noreferrer"}},[e._v("构建目标(targets)"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("webpack 能够为多种环境或 target 构建编译。想要理解什么是 target 的详细信息，请阅读 target 概念页面。")]),e._v(" "),s("p",[s("code",[e._v("target")]),e._v(": 告知 webpack 为目标(target)指定一个环境。")]),e._v(" "),s("p",[e._v("可以支持以下字符串值：")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("选项")]),e._v(" "),s("th",[e._v("描述")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("async-node")]),e._v(" "),s("td",[e._v("编译为类 Node.js 环境可用（使用 fs 和 vm 异步加载分块）")])]),e._v(" "),s("tr",[s("td",[e._v("electron-main")]),e._v(" "),s("td",[e._v("编译为 Electron 主进程。")])]),e._v(" "),s("tr",[s("td",[e._v("electron-renderer")]),e._v(" "),s("td",[e._v("编译为 Electron 渲染进程，使用 JsonpTemplatePlugin, FunctionModulePlugin 来为浏览器环境提供目标，使用 NodeTargetPlugin 和 ExternalsPlugin 为 CommonJS 和 Electron 内置模块提供目标。")])]),e._v(" "),s("tr",[s("td",[e._v("node")]),e._v(" "),s("td",[e._v("编译为类 Node.js 环境可用（使用 Node.js require 加载 chunk）")])]),e._v(" "),s("tr",[s("td",[e._v("node-webkit")]),e._v(" "),s("td",[e._v("编译为 Webkit 可用，并且使用 jsonp 去加载分块。支持 Node.js 内置模块和 nw.gui 导入（实验性质）")])]),e._v(" "),s("tr",[s("td",[e._v("web")]),e._v(" "),s("td",[e._v("编译为类浏览器环境里可用（默认）")])]),e._v(" "),s("tr",[s("td",[e._v("webworker")]),e._v(" "),s("td",[e._v("编译成一个 WebWorker")])])])]),e._v(" "),s("p",[e._v('例如，当 target 设置为 "electron"，webpack 引入多个 electron 特定的变量.')]),e._v(" "),s("p",[e._v("webpack.config.js")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// webpack.config.js\nmodule.exports = {\n  mode: 'production',\n  entry: './src/index.js',\n  output: {\n    filename: 'main.[hash].js',\n    path: path.resolve(__dirname, './dist')\n  },\n  alias: {\n    extensions: [\".js\", \".vue\",\".json\"]   // 默认值: [\".js\",\".json\"]\n    vue$: path.resolve(__dirname, 'src/lib/vue/dist/vue.esm.js'),\n    '@': path.resolve(__dirname, 'src/')\n  },\n  externals: {\n    jquery: 'jQuery'\n  },\n+ target: 'node'\n  ...\n}Copy to clipboardErrorCopied\n")])])]),s("h2",{attrs:{id:"相关的loader列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关的loader列表","aria-hidden":"true"}},[e._v("#")]),e._v(" 相关的loader列表")]),e._v(" "),s("p",[s("code",[e._v("webpack")]),e._v(" 可以使用 loader 来预处理文件。这允许你打包除 JavaScript 之外的任何静态资源。你可以使用 Node.js 来很简单地编写自己的 loader。")]),e._v(" "),s("h3",{attrs:{id:"文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 文件")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("raw-loader")]),e._v(" 加载文件原始内容（utf-8）")]),e._v(" "),s("li",[s("code",[e._v("val-loader")]),e._v(" 将代码作为模块执行，并将 exports 转为 JS 代码")]),e._v(" "),s("li",[s("code",[e._v("url-loader")]),e._v(" 像 file loader 一样工作，但如果文件小于限制，可以返回 "),s("a",{attrs:{href:"https://tools.ietf.org/html/rfc2397",target:"_blank",rel:"noopener noreferrer"}},[e._v("data URL"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("code",[e._v("file-loader")]),e._v(" 将文件发送到输出文件夹，并返回（相对）URL")])]),e._v(" "),s("h3",{attrs:{id:"json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#json","aria-hidden":"true"}},[e._v("#")]),e._v(" JSON")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("json-loader")]),e._v(" 加载 "),s("a",{attrs:{href:"http://json.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON"),s("OutboundLink")],1),e._v(" 文件（默认包含）")]),e._v(" "),s("li",[s("code",[e._v("json5-loader")]),e._v(" 加载和转译 "),s("a",{attrs:{href:"https://json5.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON 5"),s("OutboundLink")],1),e._v(" 文件")]),e._v(" "),s("li",[s("code",[e._v("cson-loader")]),e._v(" 加载和转译 "),s("a",{attrs:{href:"https://github.com/bevry/cson#what-is-cson",target:"_blank",rel:"noopener noreferrer"}},[e._v("CSON"),s("OutboundLink")],1),e._v(" 文件")])]),e._v(" "),s("h3",{attrs:{id:"转换编译-transpiling"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转换编译-transpiling","aria-hidden":"true"}},[e._v("#")]),e._v(" 转换编译(Transpiling)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("script-loader")]),e._v(" 在全局上下文中执行一次 JavaScript 文件（如在 script 标签），不需要解析")]),e._v(" "),s("li",[s("code",[e._v("babel-loader")]),e._v(" 加载 ES2015+ 代码，然后使用 "),s("a",{attrs:{href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Babel"),s("OutboundLink")],1),e._v(" 转译为 ES5")]),e._v(" "),s("li",[s("code",[e._v("buble-loader")]),e._v(" 使用 "),s("a",{attrs:{href:"https://buble.surge.sh/guide/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Bublé"),s("OutboundLink")],1),e._v(" 加载 ES2015+ 代码，并且将代码转译为 ES5")]),e._v(" "),s("li",[s("code",[e._v("traceur-loader")]),e._v(" 加载 ES2015+ 代码，然后使用 "),s("a",{attrs:{href:"https://github.com/google/traceur-compiler#readme",target:"_blank",rel:"noopener noreferrer"}},[e._v("Traceur"),s("OutboundLink")],1),e._v(" 转译为 ES5")]),e._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/TypeStrong/ts-loader",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("ts-loader")]),s("OutboundLink")],1),e._v(" 或 "),s("a",{attrs:{href:"https://github.com/s-panferov/awesome-typescript-loader",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("awesome-typescript-loader")]),s("OutboundLink")],1),e._v(" 像 JavaScript 一样加载 "),s("a",{attrs:{href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("TypeScript"),s("OutboundLink")],1),e._v(" 2.0+")]),e._v(" "),s("li",[s("code",[e._v("coffee-loader")]),e._v(" 像 JavaScript 一样加载 "),s("a",{attrs:{href:"http://coffeescript.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("CoffeeScript"),s("OutboundLink")],1)])]),e._v(" "),s("h3",{attrs:{id:"模板-templating"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模板-templating","aria-hidden":"true"}},[e._v("#")]),e._v(" 模板(Templating)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("html-loader")]),e._v(" 导出 HTML 为字符串，需要引用静态资源")]),e._v(" "),s("li",[s("code",[e._v("pug-loader")]),e._v(" 加载 Pug 模板并返回一个函数")]),e._v(" "),s("li",[s("code",[e._v("jade-loader")]),e._v(" 加载 Jade 模板并返回一个函数")]),e._v(" "),s("li",[s("code",[e._v("markdown-loader")]),e._v(" 将 Markdown 转译为 HTML")]),e._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/javiercf/react-markdown-loader",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("react-markdown-loader")]),s("OutboundLink")],1),e._v(" 使用 markdown-parse parser(解析器) 将 Markdown 编译为 React 组件")]),e._v(" "),s("li",[s("code",[e._v("posthtml-loader")]),e._v(" 使用 "),s("a",{attrs:{href:"https://github.com/posthtml/posthtml",target:"_blank",rel:"noopener noreferrer"}},[e._v("PostHTML"),s("OutboundLink")],1),e._v(" 加载并转换 HTML 文件")]),e._v(" "),s("li",[s("code",[e._v("handlebars-loader")]),e._v(" 将 Handlebars 转移为 HTML")]),e._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/asnowwolf/markup-inline-loader",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("markup-inline-loader")]),s("OutboundLink")],1),e._v(" 将内联的 SVG/MathML 文件转换为 HTML。在应用于图标字体，或将 CSS 动画应用于 SVG 时非常有用。")])]),e._v(" "),s("h3",{attrs:{id:"样式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#样式","aria-hidden":"true"}},[e._v("#")]),e._v(" 样式")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("style-loader")]),e._v(" 将模块的导出作为样式添加到 DOM 中")]),e._v(" "),s("li",[s("code",[e._v("css-loader")]),e._v(" 解析 CSS 文件后，使用 import 加载，并且返回 CSS 代码")]),e._v(" "),s("li",[s("code",[e._v("less-loader")]),e._v(" 加载和转译 LESS 文件")]),e._v(" "),s("li",[s("code",[e._v("sass-loader")]),e._v(" 加载和转译 SASS/SCSS 文件")]),e._v(" "),s("li",[s("code",[e._v("postcss-loader")]),e._v(" 使用 "),s("a",{attrs:{href:"http://postcss.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PostCSS"),s("OutboundLink")],1),e._v(" 加载和转译 CSS/SSS 文件")]),e._v(" "),s("li",[s("code",[e._v("stylus-loader")]),e._v(" 加载和转译 Stylus 文件")])]),e._v(" "),s("h3",{attrs:{id:"清理和测试-linting-testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清理和测试-linting-testing","aria-hidden":"true"}},[e._v("#")]),e._v(" 清理和测试(Linting && Testing)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("mocha-loader")]),e._v(" 使用 "),s("a",{attrs:{href:"https://mochajs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("mocha"),s("OutboundLink")],1),e._v(" 测试（浏览器/NodeJS）")]),e._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/webpack-contrib/eslint-loader",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("eslint-loader")]),s("OutboundLink")],1),e._v(" PreLoader，使用 "),s("a",{attrs:{href:"https://eslint.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ESLint"),s("OutboundLink")],1),e._v(" 清理代码")]),e._v(" "),s("li",[s("code",[e._v("jshint-loader")]),e._v(" PreLoader，使用 "),s("a",{attrs:{href:"http://jshint.com/about/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSHint"),s("OutboundLink")],1),e._v(" 清理代码")]),e._v(" "),s("li",[s("code",[e._v("jscs-loader")]),e._v(" PreLoader，使用 "),s("a",{attrs:{href:"http://jscs.info/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSCS"),s("OutboundLink")],1),e._v(" 检查代码样式")]),e._v(" "),s("li",[s("code",[e._v("coverjs-loader")]),e._v(" PreLoader，使用 "),s("a",{attrs:{href:"https://github.com/arian/CoverJS",target:"_blank",rel:"noopener noreferrer"}},[e._v("CoverJS"),s("OutboundLink")],1),e._v(" 确定测试覆盖率")])]),e._v(" "),s("h3",{attrs:{id:"框架-frameworks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#框架-frameworks","aria-hidden":"true"}},[e._v("#")]),e._v(" 框架(Frameworks)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("vue-loader")]),e._v(" 加载和转译 "),s("a",{attrs:{href:"https://vuejs.org/v2/guide/components.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue 组件"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("code",[e._v("polymer-loader")]),e._v(" 使用选择预处理器(preprocessor)处理，并且 "),s("code",[e._v("require()")]),e._v(" 类似一等模块(first-class)的 Web 组件")]),e._v(" "),s("li",[s("code",[e._v("angular2-template-loader")]),e._v(" 加载和转译 "),s("a",{attrs:{href:"https://angular.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Angular"),s("OutboundLink")],1),e._v(" 组件")]),e._v(" "),s("li",[e._v("Awesome 更多第三方 loader，查看 "),s("a",{attrs:{href:"https://github.com/webpack-contrib/awesome-webpack#loaders",target:"_blank",rel:"noopener noreferrer"}},[e._v("awesome-webpack 列表"),s("OutboundLink")],1),e._v("。")])]),e._v(" "),s("h2",{attrs:{id:"打包分析优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包分析优化","aria-hidden":"true"}},[e._v("#")]),e._v(" 打包分析优化")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/webpack-bundle-analyzer",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("webpack-bundle-analyzer")]),s("OutboundLink")],1),e._v(" 插件可以帮助我们分析打包后的图形化的报表。")]),e._v(" "),s("blockquote",[s("p",[e._v("仅仅在开发环境使用。")])]),e._v(" "),s("p",[e._v("安装")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("npm install --save-dev webpack-bundle-analyzer\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("+ const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;\n  module.exports = {\n    plugins: [\n+     new BundleAnalyzerPlugin()\n    ]\n  }\n")])])]),s("p",[e._v("自动生成一个网页报表，如下所示： "),s("img",{attrs:{src:a(77),alt:"图片"}})]),e._v(" "),s("h2",{attrs:{id:"other"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#other","aria-hidden":"true"}},[e._v("#")]),e._v(" other")]),e._v(" "),s("p",[e._v("webpack还是有很多其他需要学习的内容。 请参考官网，或者研究一下"),s("code",[e._v("vue-cli")]),e._v("的生成的webpack的相关配置，也很值得学习。")]),e._v(" "),s("p",[e._v("另外其他脚手架生成的相关配置都可以研究一下比如："),s("code",[e._v("create-react-app")]),e._v("、"),s("code",[e._v("yo")]),e._v("等")])])},[],!1,null,null,null);n.default=t.exports},77:function(e,n,a){e.exports=a.p+"assets/img/webtable.76eb1584.gif"}}]);